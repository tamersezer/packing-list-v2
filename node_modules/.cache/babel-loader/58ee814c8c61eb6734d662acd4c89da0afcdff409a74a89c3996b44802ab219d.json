{"ast":null,"code":"import _objectSpread from\"/Users/tamersezer/Cursor Projects/Deneme/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import{productService,packingListService}from'../../services/api';import{toast}from'react-toastify';import{EditPackageModal}from'./EditPackageModal';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const PackingListForm=()=>{const{id}=useParams();const navigate=useNavigate();const isEditing=Boolean(id);const[packingList,setPackingList]=useState({name:'',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:'draft',items:[],totalGrossWeight:0,totalNetWeight:0,totalNumberOfBoxes:0});const[packageType,setPackageType]=useState('pallet');const[packageRange,setPackageRange]=useState({start:1,end:1});const[products,setProducts]=useState([]);const[packageItems,setPackageItems]=useState([]);const[isLoading,setIsLoading]=useState(true);const[totals,setTotals]=useState({grossWeight:0,netWeight:0,dimensions:{length:packageType==='pallet'?80:0,width:packageType==='pallet'?120:0,height:0}});const[packageRows,setPackageRows]=useState([]);const[editingPackage,setEditingPackage]=useState(null);useEffect(()=>{const fetchProducts=async()=>{try{const data=await productService.getAll();setProducts(data);}catch(error){toast.error('Failed to load products');}finally{setIsLoading(false);}};fetchProducts();},[]);const handleRangeChange=(field,value)=>{const numValue=parseInt(value)||1;setPackageRange(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:numValue}));};const calculateWeights=(product,quantity)=>{return{gross:Number((product.weights.gross*quantity).toFixed(1)),net:Number((product.weights.net*quantity).toFixed(1))};};const handleAddProduct=product=>{const{gross,net}=calculateWeights(product,product.boxQuantity);setPackageItems(prev=>[...prev,{product,quantity:product.boxQuantity,totalGrossWeight:gross,totalNetWeight:net}]);};const handleQuantityChange=(index,value)=>{const numValue=parseInt(value)||1;setPackageItems(prev=>prev.map((item,i)=>{if(i===index){const{gross,net}=calculateWeights(item.product,numValue);return _objectSpread(_objectSpread({},item),{},{quantity:numValue,totalGrossWeight:gross,totalNetWeight:net});}return item;}));};const handleRemoveProduct=index=>{setPackageItems(prev=>prev.filter((_,i)=>i!==index));};const calculateTotals=items=>{const itemTotals=items.reduce((acc,item)=>({gross:acc.gross+item.totalGrossWeight,net:acc.net+item.totalNetWeight}),{gross:0,net:0});const grossWeight=packageType==='pallet'?itemTotals.gross+24:itemTotals.gross;return{grossWeight:Number(grossWeight.toFixed(1)),netWeight:Number(itemTotals.net.toFixed(1))};};useEffect(()=>{const{grossWeight,netWeight}=calculateTotals(packageItems);setTotals(prev=>_objectSpread(_objectSpread({},prev),{},{grossWeight,netWeight}));},[packageItems,packageType]);useEffect(()=>{if(packageType==='pallet'){setTotals(prev=>_objectSpread(_objectSpread({},prev),{},{dimensions:{length:80,width:120,height:0}}));}else if(packageItems.length>0){const firstProduct=packageItems[0].product;setTotals(prev=>_objectSpread(_objectSpread({},prev),{},{dimensions:{length:firstProduct.boxDimensions.length,width:firstProduct.boxDimensions.width,height:firstProduct.boxDimensions.height}}));}},[packageType,packageItems]);const handleTotalChange=(field,value)=>{const numValue=parseFloat(value)||0;if(field==='grossWeight'||field==='netWeight'){setTotals(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:Number(numValue.toFixed(1))}));}else{setTotals(prev=>_objectSpread(_objectSpread({},prev),{},{dimensions:_objectSpread(_objectSpread({},prev.dimensions),{},{[field]:Number(numValue.toFixed(1))})}));}};const validatePackage=useCallback(()=>{if(packageItems.length===0){toast.error('Please add at least one product');return false;}const{grossWeight,netWeight}=totals;if(grossWeight<netWeight){toast.error('Gross weight cannot be less than net weight');return false;}if(totals.dimensions.height<=0||totals.dimensions.width<=0||totals.dimensions.length<=0){toast.error('All dimensions must be greater than 0');return false;}return true;},[packageItems,totals]);const handleAddPackage=async()=>{if(!validatePackage())return;try{const packageNo=packageType==='pallet'?packageRange.start.toString():\"\".concat(packageRange.start,\" to \").concat(packageRange.end);// Yeni paket satırı oluştur\nconst newPackageRow={id:crypto.randomUUID(),packageNo,items:packageItems.map(item=>({product:item.product,quantity:item.quantity})),grossWeight:totals.grossWeight,netWeight:totals.netWeight,dimensions:totals.dimensions,// Eğer tüm ürünlerin HS kodu aynıysa, onu kullan\nhsCode:packageItems.every(item=>item.product.hsCode===packageItems[0].product.hsCode)?packageItems[0].product.hsCode:undefined};setPackageRows(prev=>[...prev,newPackageRow]);// Formu sıfırla\nsetPackageItems([]);setTotals({grossWeight:0,netWeight:0,dimensions:{length:packageType==='pallet'?80:0,width:packageType==='pallet'?120:0,height:0}});// Palet ise sonraki numaraya geç\nif(packageType==='pallet'){setPackageRange(prev=>({start:prev.start+1,end:prev.start+1}));}else{// Koli ise sonraki aralığa geç\nsetPackageRange(prev=>({start:prev.end+1,end:prev.end+1}));}toast.success('Package added successfully');}catch(error){toast.error('Failed to add package');console.error('Add package error:',error);}};// Son paket numarasını bulup bir sonrakini ayarla\nconst setNextPackageNumber=rows=>{if(rows.length===0){setPackageRange({start:1,end:1});return;}// Son paketin numarasını al\nconst lastPackageNo=rows[rows.length-1].packageNo;// \"1 to 3\" formatındaysa son sayıyı, değilse tek sayıyı al\nconst match=lastPackageNo.match(/(\\d+)(?:\\s*to\\s*(\\d+))?/);if(!match)return;const lastNumber=match[2]||match[1];const nextNumber=parseInt(lastNumber)+1;setPackageRange({start:nextNumber,end:nextNumber});};// Mevcut paket listesini yükle\nuseEffect(()=>{const loadPackingList=async()=>{if(id){try{const data=await packingListService.getById(id);setPackingList(data);setPackageRows(data.items);setNextPackageNumber(data.items);// Yeni eklendi\n}catch(error){toast.error('Failed to load packing list');navigate('/packing-list');}}};loadPackingList();},[id,navigate]);// Package Type değiştiğinde input'u enable/disable yap\nuseEffect(()=>{const input=document.querySelector('input[type=\"number\"][min=\"1\"]');if(input){input.disabled=packageType==='pallet';}},[packageType]);// Değişiklikleri otomatik kaydet\nuseEffect(()=>{if(!packingList.name)return;const timeoutId=setTimeout(async()=>{try{const updatedPackingList=_objectSpread(_objectSpread({},packingList),{},{items:packageRows,updatedAt:new Date().toISOString(),totalGrossWeight:packageRows.reduce((sum,row)=>sum+row.grossWeight,0),totalNetWeight:packageRows.reduce((sum,row)=>sum+row.netWeight,0),totalNumberOfBoxes:packageRows.reduce((sum,row)=>sum+row.items.reduce((itemSum,item)=>itemSum+item.quantity,0),0)});if(id){await packingListService.update(id,updatedPackingList);}else if(packingList.id){await packingListService.update(packingList.id,updatedPackingList);}else{const newList=await packingListService.create(updatedPackingList);setPackingList(prev=>_objectSpread(_objectSpread({},prev),{},{id:newList.id}));}}catch(error){toast.error('Failed to save changes');console.error('Save error:',error);}},1000);return()=>clearTimeout(timeoutId);},[packingList.name,packageRows,id]);// Sayfadan çıkmadan önce kontrol\nuseEffect(()=>{const handleBeforeUnload=e=>{if(!packingList.name&&(packageRows.length>0||packageItems.length>0)){e.preventDefault();e.returnValue='';}};window.addEventListener('beforeunload',handleBeforeUnload);return()=>{window.removeEventListener('beforeunload',handleBeforeUnload);};},[packingList.name,packageRows.length,packageItems.length]);const handleEditPackage=packageRow=>{setEditingPackage(packageRow);};const handleSavePackage=updatedPackage=>{setPackageRows(prev=>prev.map(row=>row.id===updatedPackage.id?updatedPackage:row));setEditingPackage(null);};const handleBackToList=()=>{if(!packingList.name&&(packageRows.length>0||packageItems.length>0)){if(window.confirm('The packing list will not be saved without a name. Are you sure you want to exit?')){navigate('/packing-list');}}else{navigate('/packing-list');}};if(isLoading){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Loading packing list...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 max-w-md\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:packingList.name,onChange:e=>setPackingList(prev=>_objectSpread(_objectSpread({},prev),{},{name:e.target.value})),placeholder:\"Enter Packing List Name\",className:\"w-full px-4 py-2 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:packingList.status.charAt(0).toUpperCase()+packingList.status.slice(1)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToList,className:\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700\",children:\"Back to List\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 shadow rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Package Type:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex bg-gray-200 dark:bg-gray-700 rounded-lg p-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPackageType('pallet'),className:\"\\n                      px-4 py-2 text-sm font-medium rounded-md\\n                      \".concat(packageType==='pallet'?'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow':'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300',\"\\n                    \"),children:\"Pallet\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPackageType('carton'),className:\"\\n                      px-4 py-2 text-sm font-medium rounded-md\\n                      \".concat(packageType==='carton'?'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow':'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300',\"\\n                    \"),children:\"Carton\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Package No:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:packageRange.start,onChange:e=>handleRangeChange('start',e.target.value),className:\"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\",disabled:packageType==='pallet'}),packageType==='carton'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 dark:text-gray-400\",children:\"to\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:packageRange.start,value:packageRange.end,onChange:e=>handleRangeChange('end',e.target.value),className:\"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[packageItems.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 dark:text-white\",children:item.product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[\"Weight: \",item.totalGrossWeight,\" kg gross / \",item.totalNetWeight,\" kg net\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:item.quantity,onChange:e=>handleQuantityChange(index,e.target.value),className:\"w-24 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveProduct(index),className:\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]})]},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"w-full px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md focus:outline-none\",onClick:()=>{const menu=document.getElementById('productMenu');if(menu)menu.classList.toggle('hidden');},children:\"+ Add Product\"}),/*#__PURE__*/_jsx(\"div\",{id:\"productMenu\",className:\"hidden absolute z-10 mt-2 w-full bg-white dark:bg-gray-800 shadow-lg rounded-md py-1 max-h-60 overflow-auto\",children:products.filter(product=>!packageItems.some(item=>item.product.id===product.id)).map(product=>/*#__PURE__*/_jsxs(\"button\",{className:\"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\",onClick:()=>{handleAddProduct(product);const menu=document.getElementById('productMenu');if(menu)menu.classList.add('hidden');},children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[\"HS Code: \",product.hsCode,\" | Box Qty: \",product.boxQuantity]})]},product.id))})]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 bg-white dark:bg-gray-800 shadow rounded-lg p-6 h-fit sticky top-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-4\",children:\"Package Totals\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Total Gross Weight (kg)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:totals.grossWeight,onChange:e=>handleTotalChange('grossWeight',e.target.value),className:\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Total Net Weight (kg)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:totals.netWeight,onChange:e=>handleTotalChange('netWeight',e.target.value),className:\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Dimensions (cm)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:totals.dimensions.length,onChange:e=>handleTotalChange('length',e.target.value),placeholder:\"Length\",className:\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:totals.dimensions.width,onChange:e=>handleTotalChange('width',e.target.value),placeholder:\"Width\",className:\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",value:totals.dimensions.height,onChange:e=>handleTotalChange('height',e.target.value),placeholder:\"Height\",className:\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"})})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mt-4\",onClick:handleAddPackage,children:\"Add Package\"})]})]})]}),packageRows.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 bg-white dark:bg-gray-800 shadow rounded-lg overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Package No\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Package In Explanation\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Gross Weight\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Net Weight\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"HS Code\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Dimensions\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\",children:packageRows.map(row=>row.items.map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{children:[itemIndex===0&&/*#__PURE__*/_jsx(\"td\",{rowSpan:row.items.length,className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",children:row.packageNo}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-900 dark:text-white\",children:item.product.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:item.quantity}),itemIndex===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{rowSpan:row.items.length,className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",children:row.grossWeight}),/*#__PURE__*/_jsx(\"td\",{rowSpan:row.items.length,className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",children:row.netWeight})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:item.product.hsCode}),itemIndex===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{rowSpan:row.items.length,className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",children:\"\".concat(row.dimensions.length,\" \\xD7 \").concat(row.dimensions.width,\" \\xD7 \").concat(row.dimensions.height)}),/*#__PURE__*/_jsxs(\"td\",{rowSpan:row.items.length,className:\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditPackage(row),className:\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Are you sure you want to delete this package?')){setPackageRows(prev=>prev.filter(p=>p.id!==row.id));}},className:\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\",children:\"Delete\"})]})]})]},\"\".concat(row.id,\"-\").concat(itemIndex))))})]})}),editingPackage&&/*#__PURE__*/_jsx(EditPackageModal,{isOpen:Boolean(editingPackage),onClose:()=>setEditingPackage(null),onSave:handleSavePackage,packageData:editingPackage,allProducts:products})]});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","productService","packingListService","toast","EditPackageModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PackingListForm","id","navigate","isEditing","Boolean","packingList","setPackingList","name","createdAt","Date","toISOString","updatedAt","status","items","totalGrossWeight","totalNetWeight","totalNumberOfBoxes","packageType","setPackageType","packageRange","setPackageRange","start","end","products","setProducts","packageItems","setPackageItems","isLoading","setIsLoading","totals","setTotals","grossWeight","netWeight","dimensions","length","width","height","packageRows","setPackageRows","editingPackage","setEditingPackage","fetchProducts","data","getAll","error","handleRangeChange","field","value","numValue","parseInt","prev","_objectSpread","calculateWeights","product","quantity","gross","Number","weights","toFixed","net","handleAddProduct","boxQuantity","handleQuantityChange","index","map","item","i","handleRemoveProduct","filter","_","calculateTotals","itemTotals","reduce","acc","firstProduct","boxDimensions","handleTotalChange","parseFloat","validatePackage","handleAddPackage","packageNo","toString","concat","newPackageRow","crypto","randomUUID","hsCode","every","undefined","success","console","setNextPackageNumber","rows","lastPackageNo","match","lastNumber","nextNumber","loadPackingList","getById","input","document","querySelector","disabled","timeoutId","setTimeout","updatedPackingList","sum","row","itemSum","update","newList","create","clearTimeout","handleBeforeUnload","e","preventDefault","returnValue","window","addEventListener","removeEventListener","handleEditPackage","packageRow","handleSavePackage","updatedPackage","handleBackToList","confirm","className","children","type","onChange","target","placeholder","charAt","toUpperCase","slice","onClick","min","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","menu","getElementById","classList","toggle","some","add","step","itemIndex","rowSpan","p","isOpen","onClose","onSave","packageData","allProducts"],"sources":["/Users/tamersezer/Cursor Projects/Deneme/src/components/packing/PackingListForm.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { productService, packingListService } from '../../services/api';\nimport type { Product } from '../../types/Product';\nimport { toast } from 'react-toastify';\nimport type { PackingList } from '../../types/PackingList';\nimport { EditPackageModal } from './EditPackageModal';\n\ntype PackageType = 'pallet' | 'carton';\n\ninterface PackageRange {\n  start: number;\n  end: number;\n}\n\ninterface PackageItem {\n  product: Product;\n  quantity: number;\n  totalGrossWeight: number;\n  totalNetWeight: number;\n}\n\ninterface PackageTotals {\n  grossWeight: number;\n  netWeight: number;\n  dimensions: {\n    length: number;\n    width: number;\n    height: number;\n  };\n}\n\ninterface PackageRow {\n  id: string;\n  packageNo: string; // \"1\" veya \"1 to 3\" gibi\n  items: {\n    product: Product;\n    quantity: number;\n  }[];\n  grossWeight: number;\n  netWeight: number;\n  dimensions: {\n    length: number;\n    width: number;\n    height: number;\n  };\n  hsCode?: string; // Opsiyonel, eğer tüm ürünlerin HS kodu aynıysa kullanılacak\n}\n\nexport const PackingListForm: React.FC = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const isEditing = Boolean(id);\n\n  const [packingList, setPackingList] = useState<PackingList>({\n    name: '',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    status: 'draft',\n    items: [],\n    totalGrossWeight: 0,\n    totalNetWeight: 0,\n    totalNumberOfBoxes: 0\n  });\n\n  const [packageType, setPackageType] = useState<PackageType>('pallet');\n  const [packageRange, setPackageRange] = useState<PackageRange>({ start: 1, end: 1 });\n  const [products, setProducts] = useState<Product[]>([]);\n  const [packageItems, setPackageItems] = useState<PackageItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [totals, setTotals] = useState<PackageTotals>({\n    grossWeight: 0,\n    netWeight: 0,\n    dimensions: {\n      length: packageType === 'pallet' ? 80 : 0,\n      width: packageType === 'pallet' ? 120 : 0,\n      height: 0\n    }\n  });\n  const [packageRows, setPackageRows] = useState<PackageRow[]>([]);\n  const [editingPackage, setEditingPackage] = useState<PackageRow | null>(null);\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const data = await productService.getAll();\n        setProducts(data);\n      } catch (error) {\n        toast.error('Failed to load products');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, []);\n\n  const handleRangeChange = (field: keyof PackageRange, value: string) => {\n    const numValue = parseInt(value) || 1;\n    setPackageRange(prev => ({\n      ...prev,\n      [field]: numValue\n    }));\n  };\n\n  const calculateWeights = (product: Product, quantity: number): { gross: number; net: number } => {\n    return {\n      gross: Number((product.weights.gross * quantity).toFixed(1)),\n      net: Number((product.weights.net * quantity).toFixed(1))\n    };\n  };\n\n  const handleAddProduct = (product: Product) => {\n    const { gross, net } = calculateWeights(product, product.boxQuantity);\n    setPackageItems(prev => [...prev, {\n      product,\n      quantity: product.boxQuantity,\n      totalGrossWeight: gross,\n      totalNetWeight: net\n    }]);\n  };\n\n  const handleQuantityChange = (index: number, value: string) => {\n    const numValue = parseInt(value) || 1;\n    setPackageItems(prev => prev.map((item, i) => {\n      if (i === index) {\n        const { gross, net } = calculateWeights(item.product, numValue);\n        return {\n          ...item,\n          quantity: numValue,\n          totalGrossWeight: gross,\n          totalNetWeight: net\n        };\n      }\n      return item;\n    }));\n  };\n\n  const handleRemoveProduct = (index: number) => {\n    setPackageItems(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const calculateTotals = (items: PackageItem[]) => {\n    const itemTotals = items.reduce(\n      (acc, item) => ({\n        gross: acc.gross + item.totalGrossWeight,\n        net: acc.net + item.totalNetWeight\n      }),\n      { gross: 0, net: 0 }\n    );\n\n    const grossWeight = packageType === 'pallet' \n      ? itemTotals.gross + 24 \n      : itemTotals.gross;\n\n    return {\n      grossWeight: Number(grossWeight.toFixed(1)),\n      netWeight: Number(itemTotals.net.toFixed(1))\n    };\n  };\n\n  useEffect(() => {\n    const { grossWeight, netWeight } = calculateTotals(packageItems);\n    setTotals(prev => ({\n      ...prev,\n      grossWeight,\n      netWeight\n    }));\n  }, [packageItems, packageType]);\n\n  useEffect(() => {\n    if (packageType === 'pallet') {\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          length: 80,\n          width: 120,\n          height: 0\n        }\n      }));\n    } else if (packageItems.length > 0) {\n      const firstProduct = packageItems[0].product;\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          length: firstProduct.boxDimensions.length,\n          width: firstProduct.boxDimensions.width,\n          height: firstProduct.boxDimensions.height\n        }\n      }));\n    }\n  }, [packageType, packageItems]);\n\n  const handleTotalChange = (\n    field: keyof PackageTotals | keyof PackageTotals['dimensions'],\n    value: string\n  ) => {\n    const numValue = parseFloat(value) || 0;\n    if (field === 'grossWeight' || field === 'netWeight') {\n      setTotals(prev => ({\n        ...prev,\n        [field]: Number(numValue.toFixed(1))\n      }));\n    } else {\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          ...prev.dimensions,\n          [field]: Number(numValue.toFixed(1))\n        }\n      }));\n    }\n  };\n\n  const validatePackage = useCallback(() => {\n    if (packageItems.length === 0) {\n      toast.error('Please add at least one product');\n      return false;\n    }\n\n    const { grossWeight, netWeight } = totals;\n    if (grossWeight < netWeight) {\n      toast.error('Gross weight cannot be less than net weight');\n      return false;\n    }\n\n    if (totals.dimensions.height <= 0 || \n        totals.dimensions.width <= 0 || \n        totals.dimensions.length <= 0) {\n      toast.error('All dimensions must be greater than 0');\n      return false;\n    }\n\n    return true;\n  }, [packageItems, totals]);\n\n  const handleAddPackage = async () => {\n    if (!validatePackage()) return;\n\n    try {\n      const packageNo = packageType === 'pallet' \n        ? packageRange.start.toString()\n        : `${packageRange.start} to ${packageRange.end}`;\n\n      // Yeni paket satırı oluştur\n      const newPackageRow: PackageRow = {\n        id: crypto.randomUUID(),\n        packageNo,\n        items: packageItems.map(item => ({\n          product: item.product,\n          quantity: item.quantity\n        })),\n        grossWeight: totals.grossWeight,\n        netWeight: totals.netWeight,\n        dimensions: totals.dimensions,\n        // Eğer tüm ürünlerin HS kodu aynıysa, onu kullan\n        hsCode: packageItems.every(item => item.product.hsCode === packageItems[0].product.hsCode)\n          ? packageItems[0].product.hsCode\n          : undefined\n      };\n\n      setPackageRows(prev => [...prev, newPackageRow]);\n\n      // Formu sıfırla\n      setPackageItems([]);\n      setTotals({\n        grossWeight: 0,\n        netWeight: 0,\n        dimensions: {\n          length: packageType === 'pallet' ? 80 : 0,\n          width: packageType === 'pallet' ? 120 : 0,\n          height: 0\n        }\n      });\n\n      // Palet ise sonraki numaraya geç\n      if (packageType === 'pallet') {\n        setPackageRange(prev => ({\n          start: prev.start + 1,\n          end: prev.start + 1\n        }));\n      } else {\n        // Koli ise sonraki aralığa geç\n        setPackageRange(prev => ({\n          start: prev.end + 1,\n          end: prev.end + 1\n        }));\n      }\n\n      toast.success('Package added successfully');\n    } catch (error) {\n      toast.error('Failed to add package');\n      console.error('Add package error:', error);\n    }\n  };\n\n  // Son paket numarasını bulup bir sonrakini ayarla\n  const setNextPackageNumber = (rows: PackageRow[]) => {\n    if (rows.length === 0) {\n      setPackageRange({ start: 1, end: 1 });\n      return;\n    }\n\n    // Son paketin numarasını al\n    const lastPackageNo = rows[rows.length - 1].packageNo;\n    \n    // \"1 to 3\" formatındaysa son sayıyı, değilse tek sayıyı al\n    const match = lastPackageNo.match(/(\\d+)(?:\\s*to\\s*(\\d+))?/);\n    if (!match) return;\n\n    const lastNumber = match[2] || match[1];\n    const nextNumber = parseInt(lastNumber) + 1;\n\n    setPackageRange({\n      start: nextNumber,\n      end: nextNumber\n    });\n  };\n\n  // Mevcut paket listesini yükle\n  useEffect(() => {\n    const loadPackingList = async () => {\n      if (id) {\n        try {\n          const data = await packingListService.getById(id);\n          setPackingList(data);\n          setPackageRows(data.items);\n          setNextPackageNumber(data.items); // Yeni eklendi\n        } catch (error) {\n          toast.error('Failed to load packing list');\n          navigate('/packing-list');\n        }\n      }\n    };\n\n    loadPackingList();\n  }, [id, navigate]);\n\n  // Package Type değiştiğinde input'u enable/disable yap\n  useEffect(() => {\n    const input = document.querySelector('input[type=\"number\"][min=\"1\"]') as HTMLInputElement;\n    if (input) {\n      input.disabled = packageType === 'pallet';\n    }\n  }, [packageType]);\n\n  // Değişiklikleri otomatik kaydet\n  useEffect(() => {\n    if (!packingList.name) return;\n\n    const timeoutId = setTimeout(async () => {\n      try {\n        const updatedPackingList = {\n          ...packingList,\n          items: packageRows,\n          updatedAt: new Date().toISOString(),\n          totalGrossWeight: packageRows.reduce((sum, row) => sum + row.grossWeight, 0),\n          totalNetWeight: packageRows.reduce((sum, row) => sum + row.netWeight, 0),\n          totalNumberOfBoxes: packageRows.reduce((sum, row) => \n            sum + row.items.reduce((itemSum, item) => itemSum + item.quantity, 0), 0\n          )\n        };\n\n        if (id) {\n          await packingListService.update(id, updatedPackingList);\n        } else if (packingList.id) {\n          await packingListService.update(packingList.id, updatedPackingList);\n        } else {\n          const newList = await packingListService.create(updatedPackingList);\n          setPackingList(prev => ({ ...prev, id: newList.id }));\n        }\n      } catch (error) {\n        toast.error('Failed to save changes');\n        console.error('Save error:', error);\n      }\n    }, 1000);\n\n    return () => clearTimeout(timeoutId);\n  }, [packingList.name, packageRows, id]);\n\n  // Sayfadan çıkmadan önce kontrol\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (!packingList.name && (packageRows.length > 0 || packageItems.length > 0)) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [packingList.name, packageRows.length, packageItems.length]);\n\n  const handleEditPackage = (packageRow: PackageRow) => {\n    setEditingPackage(packageRow);\n  };\n\n  const handleSavePackage = (updatedPackage: PackageRow) => {\n    setPackageRows(prev => prev.map(row => \n      row.id === updatedPackage.id ? updatedPackage : row\n    ));\n    setEditingPackage(null);\n  };\n\n  const handleBackToList = () => {\n    if (!packingList.name && (packageRows.length > 0 || packageItems.length > 0)) {\n      if (window.confirm('The packing list will not be saved without a name. Are you sure you want to exit?')) {\n        navigate('/packing-list');\n      }\n    } else {\n      navigate('/packing-list');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4\"></div>\n        <p className=\"text-gray-600 dark:text-gray-400\">Loading packing list...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div className=\"flex-1 max-w-md\">\n          <input\n            type=\"text\"\n            value={packingList.name}\n            onChange={(e) => setPackingList(prev => ({ ...prev, name: e.target.value }))}\n            placeholder=\"Enter Packing List Name\"\n            className=\"w-full px-4 py-2 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n          />\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n            {packingList.status.charAt(0).toUpperCase() + packingList.status.slice(1)}\n          </span>\n          <button\n            onClick={handleBackToList}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700\"\n          >\n            Back to List\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex gap-6\">\n        <div className=\"flex-1\">\n          <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg p-6\">\n            <div className=\"space-y-6\">\n              {/* Package Type Switch */}\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Package Type:</span>\n                <div className=\"flex bg-gray-200 dark:bg-gray-700 rounded-lg p-1\">\n                  <button\n                    onClick={() => setPackageType('pallet')}\n                    className={`\n                      px-4 py-2 text-sm font-medium rounded-md\n                      ${packageType === 'pallet'\n                        ? 'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow'\n                        : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                      }\n                    `}\n                  >\n                    Pallet\n                  </button>\n                  <button\n                    onClick={() => setPackageType('carton')}\n                    className={`\n                      px-4 py-2 text-sm font-medium rounded-md\n                      ${packageType === 'carton'\n                        ? 'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow'\n                        : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                      }\n                    `}\n                  >\n                    Carton\n                  </button>\n                </div>\n              </div>\n\n              {/* Package Number Range */}\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Package No:</span>\n                <div className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    value={packageRange.start}\n                    onChange={(e) => handleRangeChange('start', e.target.value)}\n                    className=\"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                    disabled={packageType === 'pallet'}\n                  />\n                  {packageType === 'carton' && (\n                    <>\n                      <span className=\"text-gray-500 dark:text-gray-400\">to</span>\n                      <input\n                        type=\"number\"\n                        min={packageRange.start}\n                        value={packageRange.end}\n                        onChange={(e) => handleRangeChange('end', e.target.value)}\n                        className=\"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                      />\n                    </>\n                  )}\n                </div>\n              </div>\n\n              {/* Product List */}\n              <div className=\"space-y-4\">\n                {packageItems.map((item, index) => (\n                  <div key={index} className=\"flex items-center space-x-4 bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\n                    <div className=\"flex-1\">\n                      <p className=\"font-medium text-gray-900 dark:text-white\">{item.product.name}</p>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                        Weight: {item.totalGrossWeight} kg gross / {item.totalNetWeight} kg net\n                      </p>\n                    </div>\n                    <div className=\"flex items-center space-x-4\">\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => handleQuantityChange(index, e.target.value)}\n                        className=\"w-24 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                      />\n                      <button\n                        onClick={() => handleRemoveProduct(index)}\n                        className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                      >\n                        <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                ))}\n\n                {/* Add Product Button */}\n                <div className=\"relative\">\n                  <button\n                    type=\"button\"\n                    className=\"w-full px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md focus:outline-none\"\n                    onClick={() => {\n                      const menu = document.getElementById('productMenu');\n                      if (menu) menu.classList.toggle('hidden');\n                    }}\n                  >\n                    + Add Product\n                  </button>\n\n                  {/* Product Dropdown Menu */}\n                  <div\n                    id=\"productMenu\"\n                    className=\"hidden absolute z-10 mt-2 w-full bg-white dark:bg-gray-800 shadow-lg rounded-md py-1 max-h-60 overflow-auto\"\n                  >\n                    {products\n                      .filter(product => !packageItems.some(item => item.product.id === product.id))\n                      .map(product => (\n                        <button\n                          key={product.id}\n                          className=\"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\"\n                          onClick={() => {\n                            handleAddProduct(product);\n                            const menu = document.getElementById('productMenu');\n                            if (menu) menu.classList.add('hidden');\n                          }}\n                        >\n                          <div className=\"font-medium\">{product.name}</div>\n                          <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                            HS Code: {product.hsCode} | Box Qty: {product.boxQuantity}\n                          </div>\n                        </button>\n                      ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Sağ taraf - Totals */}\n        <div className=\"w-80 bg-white dark:bg-gray-800 shadow rounded-lg p-6 h-fit sticky top-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Package Totals</h3>\n          \n          <div className=\"space-y-4\">\n            {/* Weights */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Total Gross Weight (kg)\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                value={totals.grossWeight}\n                onChange={(e) => handleTotalChange('grossWeight', e.target.value)}\n                className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Total Net Weight (kg)\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                value={totals.netWeight}\n                onChange={(e) => handleTotalChange('netWeight', e.target.value)}\n                className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n              />\n            </div>\n\n            {/* Dimensions */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Dimensions (cm)\n              </label>\n              <div className=\"grid grid-cols-3 gap-2\">\n                <div>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={totals.dimensions.length}\n                    onChange={(e) => handleTotalChange('length', e.target.value)}\n                    placeholder=\"Length\"\n                    className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={totals.dimensions.width}\n                    onChange={(e) => handleTotalChange('width', e.target.value)}\n                    placeholder=\"Width\"\n                    className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={totals.dimensions.height}\n                    onChange={(e) => handleTotalChange('height', e.target.value)}\n                    placeholder=\"Height\"\n                    className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Add Package Button */}\n            <button\n              type=\"button\"\n              className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mt-4\"\n              onClick={handleAddPackage}\n            >\n              Add Package\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Package List Table */}\n      {packageRows.length > 0 && (\n        <div className=\"mt-8 bg-white dark:bg-gray-800 shadow rounded-lg overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Package No\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Package In Explanation\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Qty\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Gross Weight\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Net Weight\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  HS Code\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Dimensions\n                </th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {packageRows.map((row) => (\n                row.items.map((item, itemIndex) => (\n                  <tr key={`${row.id}-${itemIndex}`}>\n                    {itemIndex === 0 && (\n                      <td \n                        rowSpan={row.items.length} \n                        className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                      >\n                        {row.packageNo}\n                      </td>\n                    )}\n                    <td className=\"px-6 py-4 text-sm text-gray-900 dark:text-white\">\n                      {item.product.name}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      {item.quantity}\n                    </td>\n                    {itemIndex === 0 && (\n                      <>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                        >\n                          {row.grossWeight}\n                        </td>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                        >\n                          {row.netWeight}\n                        </td>\n                      </>\n                    )}\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      {item.product.hsCode}\n                    </td>\n                    {itemIndex === 0 && (\n                      <>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                        >\n                          {`${row.dimensions.length} × ${row.dimensions.width} × ${row.dimensions.height}`}\n                        </td>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top\"\n                        >\n                          <button\n                            onClick={() => handleEditPackage(row)}\n                            className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3\"\n                          >\n                            Edit\n                          </button>\n                          <button\n                            onClick={() => {\n                              if (window.confirm('Are you sure you want to delete this package?')) {\n                                setPackageRows(prev => prev.filter(p => p.id !== row.id));\n                              }\n                            }}\n                            className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                          >\n                            Delete\n                          </button>\n                        </td>\n                      </>\n                    )}\n                  </tr>\n                ))\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {/* Modal */}\n      {editingPackage && (\n        <EditPackageModal\n          isOpen={Boolean(editingPackage)}\n          onClose={() => setEditingPackage(null)}\n          onSave={handleSavePackage}\n          packageData={editingPackage}\n          allProducts={products}\n        />\n      )}\n    </div>\n  );\n}; "],"mappings":"6HAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,cAAc,CAAEC,kBAAkB,KAAQ,oBAAoB,CAEvE,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,OAASC,gBAAgB,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBA2CtD,MAAO,MAAM,CAAAC,eAAyB,CAAGA,CAAA,GAAM,CAC7C,KAAM,CAAEC,EAAG,CAAC,CAAGb,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAc,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAc,SAAS,CAAGC,OAAO,CAACH,EAAE,CAAC,CAE7B,KAAM,CAACI,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAc,CAC1DsB,IAAI,CAAE,EAAE,CACRC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACnCC,SAAS,CAAE,GAAI,CAAAF,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACnCE,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,EAAE,CACTC,gBAAgB,CAAE,CAAC,CACnBC,cAAc,CAAE,CAAC,CACjBC,kBAAkB,CAAE,CACtB,CAAC,CAAC,CAEF,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGjC,QAAQ,CAAc,QAAQ,CAAC,CACrE,KAAM,CAACkC,YAAY,CAAEC,eAAe,CAAC,CAAGnC,QAAQ,CAAe,CAAEoC,KAAK,CAAE,CAAC,CAAEC,GAAG,CAAE,CAAE,CAAC,CAAC,CACpF,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGvC,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAACwC,YAAY,CAAEC,eAAe,CAAC,CAAGzC,QAAQ,CAAgB,EAAE,CAAC,CACnE,KAAM,CAAC0C,SAAS,CAAEC,YAAY,CAAC,CAAG3C,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAAC4C,MAAM,CAAEC,SAAS,CAAC,CAAG7C,QAAQ,CAAgB,CAClD8C,WAAW,CAAE,CAAC,CACdC,SAAS,CAAE,CAAC,CACZC,UAAU,CAAE,CACVC,MAAM,CAAEjB,WAAW,GAAK,QAAQ,CAAG,EAAE,CAAG,CAAC,CACzCkB,KAAK,CAAElB,WAAW,GAAK,QAAQ,CAAG,GAAG,CAAG,CAAC,CACzCmB,MAAM,CAAE,CACV,CACF,CAAC,CAAC,CACF,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGrD,QAAQ,CAAe,EAAE,CAAC,CAChE,KAAM,CAACsD,cAAc,CAAEC,iBAAiB,CAAC,CAAGvD,QAAQ,CAAoB,IAAI,CAAC,CAE7EC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuD,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAApD,cAAc,CAACqD,MAAM,CAAC,CAAC,CAC1CnB,WAAW,CAACkB,IAAI,CAAC,CACnB,CAAE,MAAOE,KAAK,CAAE,CACdpD,KAAK,CAACoD,KAAK,CAAC,yBAAyB,CAAC,CACxC,CAAC,OAAS,CACRhB,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAEDa,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,iBAAiB,CAAGA,CAACC,KAAyB,CAAEC,KAAa,GAAK,CACtE,KAAM,CAAAC,QAAQ,CAAGC,QAAQ,CAACF,KAAK,CAAC,EAAI,CAAC,CACrC3B,eAAe,CAAC8B,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACfD,IAAI,MACP,CAACJ,KAAK,EAAGE,QAAQ,EACjB,CAAC,CACL,CAAC,CAED,KAAM,CAAAI,gBAAgB,CAAGA,CAACC,OAAgB,CAAEC,QAAgB,GAAqC,CAC/F,MAAO,CACLC,KAAK,CAAEC,MAAM,CAAC,CAACH,OAAO,CAACI,OAAO,CAACF,KAAK,CAAGD,QAAQ,EAAEI,OAAO,CAAC,CAAC,CAAC,CAAC,CAC5DC,GAAG,CAAEH,MAAM,CAAC,CAACH,OAAO,CAACI,OAAO,CAACE,GAAG,CAAGL,QAAQ,EAAEI,OAAO,CAAC,CAAC,CAAC,CACzD,CAAC,CACH,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAIP,OAAgB,EAAK,CAC7C,KAAM,CAAEE,KAAK,CAAEI,GAAI,CAAC,CAAGP,gBAAgB,CAACC,OAAO,CAAEA,OAAO,CAACQ,WAAW,CAAC,CACrEnC,eAAe,CAACwB,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAChCG,OAAO,CACPC,QAAQ,CAAED,OAAO,CAACQ,WAAW,CAC7B/C,gBAAgB,CAAEyC,KAAK,CACvBxC,cAAc,CAAE4C,GAClB,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAG,oBAAoB,CAAGA,CAACC,KAAa,CAAEhB,KAAa,GAAK,CAC7D,KAAM,CAAAC,QAAQ,CAAGC,QAAQ,CAACF,KAAK,CAAC,EAAI,CAAC,CACrCrB,eAAe,CAACwB,IAAI,EAAIA,IAAI,CAACc,GAAG,CAAC,CAACC,IAAI,CAAEC,CAAC,GAAK,CAC5C,GAAIA,CAAC,GAAKH,KAAK,CAAE,CACf,KAAM,CAAER,KAAK,CAAEI,GAAI,CAAC,CAAGP,gBAAgB,CAACa,IAAI,CAACZ,OAAO,CAAEL,QAAQ,CAAC,CAC/D,OAAAG,aAAA,CAAAA,aAAA,IACKc,IAAI,MACPX,QAAQ,CAAEN,QAAQ,CAClBlC,gBAAgB,CAAEyC,KAAK,CACvBxC,cAAc,CAAE4C,GAAG,GAEvB,CACA,MAAO,CAAAM,IAAI,CACb,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAE,mBAAmB,CAAIJ,KAAa,EAAK,CAC7CrC,eAAe,CAACwB,IAAI,EAAIA,IAAI,CAACkB,MAAM,CAAC,CAACC,CAAC,CAAEH,CAAC,GAAKA,CAAC,GAAKH,KAAK,CAAC,CAAC,CAC7D,CAAC,CAED,KAAM,CAAAO,eAAe,CAAIzD,KAAoB,EAAK,CAChD,KAAM,CAAA0D,UAAU,CAAG1D,KAAK,CAAC2D,MAAM,CAC7B,CAACC,GAAG,CAAER,IAAI,IAAM,CACdV,KAAK,CAAEkB,GAAG,CAAClB,KAAK,CAAGU,IAAI,CAACnD,gBAAgB,CACxC6C,GAAG,CAAEc,GAAG,CAACd,GAAG,CAAGM,IAAI,CAAClD,cACtB,CAAC,CAAC,CACF,CAAEwC,KAAK,CAAE,CAAC,CAAEI,GAAG,CAAE,CAAE,CACrB,CAAC,CAED,KAAM,CAAA5B,WAAW,CAAGd,WAAW,GAAK,QAAQ,CACxCsD,UAAU,CAAChB,KAAK,CAAG,EAAE,CACrBgB,UAAU,CAAChB,KAAK,CAEpB,MAAO,CACLxB,WAAW,CAAEyB,MAAM,CAACzB,WAAW,CAAC2B,OAAO,CAAC,CAAC,CAAC,CAAC,CAC3C1B,SAAS,CAAEwB,MAAM,CAACe,UAAU,CAACZ,GAAG,CAACD,OAAO,CAAC,CAAC,CAAC,CAC7C,CAAC,CACH,CAAC,CAEDxE,SAAS,CAAC,IAAM,CACd,KAAM,CAAE6C,WAAW,CAAEC,SAAU,CAAC,CAAGsC,eAAe,CAAC7C,YAAY,CAAC,CAChEK,SAAS,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACTD,IAAI,MACPnB,WAAW,CACXC,SAAS,EACT,CAAC,CACL,CAAC,CAAE,CAACP,YAAY,CAAER,WAAW,CAAC,CAAC,CAE/B/B,SAAS,CAAC,IAAM,CACd,GAAI+B,WAAW,GAAK,QAAQ,CAAE,CAC5Ba,SAAS,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACTD,IAAI,MACPjB,UAAU,CAAE,CACVC,MAAM,CAAE,EAAE,CACVC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAE,CACV,CAAC,EACD,CAAC,CACL,CAAC,IAAM,IAAIX,YAAY,CAACS,MAAM,CAAG,CAAC,CAAE,CAClC,KAAM,CAAAwC,YAAY,CAAGjD,YAAY,CAAC,CAAC,CAAC,CAAC4B,OAAO,CAC5CvB,SAAS,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACTD,IAAI,MACPjB,UAAU,CAAE,CACVC,MAAM,CAAEwC,YAAY,CAACC,aAAa,CAACzC,MAAM,CACzCC,KAAK,CAAEuC,YAAY,CAACC,aAAa,CAACxC,KAAK,CACvCC,MAAM,CAAEsC,YAAY,CAACC,aAAa,CAACvC,MACrC,CAAC,EACD,CAAC,CACL,CACF,CAAC,CAAE,CAACnB,WAAW,CAAEQ,YAAY,CAAC,CAAC,CAE/B,KAAM,CAAAmD,iBAAiB,CAAGA,CACxB9B,KAA8D,CAC9DC,KAAa,GACV,CACH,KAAM,CAAAC,QAAQ,CAAG6B,UAAU,CAAC9B,KAAK,CAAC,EAAI,CAAC,CACvC,GAAID,KAAK,GAAK,aAAa,EAAIA,KAAK,GAAK,WAAW,CAAE,CACpDhB,SAAS,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACTD,IAAI,MACP,CAACJ,KAAK,EAAGU,MAAM,CAACR,QAAQ,CAACU,OAAO,CAAC,CAAC,CAAC,CAAC,EACpC,CAAC,CACL,CAAC,IAAM,CACL5B,SAAS,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACTD,IAAI,MACPjB,UAAU,CAAAkB,aAAA,CAAAA,aAAA,IACLD,IAAI,CAACjB,UAAU,MAClB,CAACa,KAAK,EAAGU,MAAM,CAACR,QAAQ,CAACU,OAAO,CAAC,CAAC,CAAC,CAAC,EACrC,EACD,CAAC,CACL,CACF,CAAC,CAED,KAAM,CAAAoB,eAAe,CAAG3F,WAAW,CAAC,IAAM,CACxC,GAAIsC,YAAY,CAACS,MAAM,GAAK,CAAC,CAAE,CAC7B1C,KAAK,CAACoD,KAAK,CAAC,iCAAiC,CAAC,CAC9C,MAAO,MAAK,CACd,CAEA,KAAM,CAAEb,WAAW,CAAEC,SAAU,CAAC,CAAGH,MAAM,CACzC,GAAIE,WAAW,CAAGC,SAAS,CAAE,CAC3BxC,KAAK,CAACoD,KAAK,CAAC,6CAA6C,CAAC,CAC1D,MAAO,MAAK,CACd,CAEA,GAAIf,MAAM,CAACI,UAAU,CAACG,MAAM,EAAI,CAAC,EAC7BP,MAAM,CAACI,UAAU,CAACE,KAAK,EAAI,CAAC,EAC5BN,MAAM,CAACI,UAAU,CAACC,MAAM,EAAI,CAAC,CAAE,CACjC1C,KAAK,CAACoD,KAAK,CAAC,uCAAuC,CAAC,CACpD,MAAO,MAAK,CACd,CAEA,MAAO,KAAI,CACb,CAAC,CAAE,CAACnB,YAAY,CAAEI,MAAM,CAAC,CAAC,CAE1B,KAAM,CAAAkD,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CAACD,eAAe,CAAC,CAAC,CAAE,OAExB,GAAI,CACF,KAAM,CAAAE,SAAS,CAAG/D,WAAW,GAAK,QAAQ,CACtCE,YAAY,CAACE,KAAK,CAAC4D,QAAQ,CAAC,CAAC,IAAAC,MAAA,CAC1B/D,YAAY,CAACE,KAAK,SAAA6D,MAAA,CAAO/D,YAAY,CAACG,GAAG,CAAE,CAElD;AACA,KAAM,CAAA6D,aAAyB,CAAG,CAChClF,EAAE,CAAEmF,MAAM,CAACC,UAAU,CAAC,CAAC,CACvBL,SAAS,CACTnE,KAAK,CAAEY,YAAY,CAACuC,GAAG,CAACC,IAAI,GAAK,CAC/BZ,OAAO,CAAEY,IAAI,CAACZ,OAAO,CACrBC,QAAQ,CAAEW,IAAI,CAACX,QACjB,CAAC,CAAC,CAAC,CACHvB,WAAW,CAAEF,MAAM,CAACE,WAAW,CAC/BC,SAAS,CAAEH,MAAM,CAACG,SAAS,CAC3BC,UAAU,CAAEJ,MAAM,CAACI,UAAU,CAC7B;AACAqD,MAAM,CAAE7D,YAAY,CAAC8D,KAAK,CAACtB,IAAI,EAAIA,IAAI,CAACZ,OAAO,CAACiC,MAAM,GAAK7D,YAAY,CAAC,CAAC,CAAC,CAAC4B,OAAO,CAACiC,MAAM,CAAC,CACtF7D,YAAY,CAAC,CAAC,CAAC,CAAC4B,OAAO,CAACiC,MAAM,CAC9BE,SACN,CAAC,CAEDlD,cAAc,CAACY,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEiC,aAAa,CAAC,CAAC,CAEhD;AACAzD,eAAe,CAAC,EAAE,CAAC,CACnBI,SAAS,CAAC,CACRC,WAAW,CAAE,CAAC,CACdC,SAAS,CAAE,CAAC,CACZC,UAAU,CAAE,CACVC,MAAM,CAAEjB,WAAW,GAAK,QAAQ,CAAG,EAAE,CAAG,CAAC,CACzCkB,KAAK,CAAElB,WAAW,GAAK,QAAQ,CAAG,GAAG,CAAG,CAAC,CACzCmB,MAAM,CAAE,CACV,CACF,CAAC,CAAC,CAEF;AACA,GAAInB,WAAW,GAAK,QAAQ,CAAE,CAC5BG,eAAe,CAAC8B,IAAI,GAAK,CACvB7B,KAAK,CAAE6B,IAAI,CAAC7B,KAAK,CAAG,CAAC,CACrBC,GAAG,CAAE4B,IAAI,CAAC7B,KAAK,CAAG,CACpB,CAAC,CAAC,CAAC,CACL,CAAC,IAAM,CACL;AACAD,eAAe,CAAC8B,IAAI,GAAK,CACvB7B,KAAK,CAAE6B,IAAI,CAAC5B,GAAG,CAAG,CAAC,CACnBA,GAAG,CAAE4B,IAAI,CAAC5B,GAAG,CAAG,CAClB,CAAC,CAAC,CAAC,CACL,CAEA9B,KAAK,CAACiG,OAAO,CAAC,4BAA4B,CAAC,CAC7C,CAAE,MAAO7C,KAAK,CAAE,CACdpD,KAAK,CAACoD,KAAK,CAAC,uBAAuB,CAAC,CACpC8C,OAAO,CAAC9C,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC5C,CACF,CAAC,CAED;AACA,KAAM,CAAA+C,oBAAoB,CAAIC,IAAkB,EAAK,CACnD,GAAIA,IAAI,CAAC1D,MAAM,GAAK,CAAC,CAAE,CACrBd,eAAe,CAAC,CAAEC,KAAK,CAAE,CAAC,CAAEC,GAAG,CAAE,CAAE,CAAC,CAAC,CACrC,OACF,CAEA;AACA,KAAM,CAAAuE,aAAa,CAAGD,IAAI,CAACA,IAAI,CAAC1D,MAAM,CAAG,CAAC,CAAC,CAAC8C,SAAS,CAErD;AACA,KAAM,CAAAc,KAAK,CAAGD,aAAa,CAACC,KAAK,CAAC,yBAAyB,CAAC,CAC5D,GAAI,CAACA,KAAK,CAAE,OAEZ,KAAM,CAAAC,UAAU,CAAGD,KAAK,CAAC,CAAC,CAAC,EAAIA,KAAK,CAAC,CAAC,CAAC,CACvC,KAAM,CAAAE,UAAU,CAAG/C,QAAQ,CAAC8C,UAAU,CAAC,CAAG,CAAC,CAE3C3E,eAAe,CAAC,CACdC,KAAK,CAAE2E,UAAU,CACjB1E,GAAG,CAAE0E,UACP,CAAC,CAAC,CACJ,CAAC,CAED;AACA9G,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+G,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAIhG,EAAE,CAAE,CACN,GAAI,CACF,KAAM,CAAAyC,IAAI,CAAG,KAAM,CAAAnD,kBAAkB,CAAC2G,OAAO,CAACjG,EAAE,CAAC,CACjDK,cAAc,CAACoC,IAAI,CAAC,CACpBJ,cAAc,CAACI,IAAI,CAAC7B,KAAK,CAAC,CAC1B8E,oBAAoB,CAACjD,IAAI,CAAC7B,KAAK,CAAC,CAAE;AACpC,CAAE,MAAO+B,KAAK,CAAE,CACdpD,KAAK,CAACoD,KAAK,CAAC,6BAA6B,CAAC,CAC1C1C,QAAQ,CAAC,eAAe,CAAC,CAC3B,CACF,CACF,CAAC,CAED+F,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,CAAChG,EAAE,CAAEC,QAAQ,CAAC,CAAC,CAElB;AACAhB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiH,KAAK,CAAGC,QAAQ,CAACC,aAAa,CAAC,+BAA+B,CAAqB,CACzF,GAAIF,KAAK,CAAE,CACTA,KAAK,CAACG,QAAQ,CAAGrF,WAAW,GAAK,QAAQ,CAC3C,CACF,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB;AACA/B,SAAS,CAAC,IAAM,CACd,GAAI,CAACmB,WAAW,CAACE,IAAI,CAAE,OAEvB,KAAM,CAAAgG,SAAS,CAAGC,UAAU,CAAC,SAAY,CACvC,GAAI,CACF,KAAM,CAAAC,kBAAkB,CAAAtD,aAAA,CAAAA,aAAA,IACnB9C,WAAW,MACdQ,KAAK,CAAEwB,WAAW,CAClB1B,SAAS,CAAE,GAAI,CAAAF,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACnCI,gBAAgB,CAAEuB,WAAW,CAACmC,MAAM,CAAC,CAACkC,GAAG,CAAEC,GAAG,GAAKD,GAAG,CAAGC,GAAG,CAAC5E,WAAW,CAAE,CAAC,CAAC,CAC5EhB,cAAc,CAAEsB,WAAW,CAACmC,MAAM,CAAC,CAACkC,GAAG,CAAEC,GAAG,GAAKD,GAAG,CAAGC,GAAG,CAAC3E,SAAS,CAAE,CAAC,CAAC,CACxEhB,kBAAkB,CAAEqB,WAAW,CAACmC,MAAM,CAAC,CAACkC,GAAG,CAAEC,GAAG,GAC9CD,GAAG,CAAGC,GAAG,CAAC9F,KAAK,CAAC2D,MAAM,CAAC,CAACoC,OAAO,CAAE3C,IAAI,GAAK2C,OAAO,CAAG3C,IAAI,CAACX,QAAQ,CAAE,CAAC,CAAC,CAAE,CACzE,CAAC,EACF,CAED,GAAIrD,EAAE,CAAE,CACN,KAAM,CAAAV,kBAAkB,CAACsH,MAAM,CAAC5G,EAAE,CAAEwG,kBAAkB,CAAC,CACzD,CAAC,IAAM,IAAIpG,WAAW,CAACJ,EAAE,CAAE,CACzB,KAAM,CAAAV,kBAAkB,CAACsH,MAAM,CAACxG,WAAW,CAACJ,EAAE,CAAEwG,kBAAkB,CAAC,CACrE,CAAC,IAAM,CACL,KAAM,CAAAK,OAAO,CAAG,KAAM,CAAAvH,kBAAkB,CAACwH,MAAM,CAACN,kBAAkB,CAAC,CACnEnG,cAAc,CAAC4C,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAEjD,EAAE,CAAE6G,OAAO,CAAC7G,EAAE,EAAG,CAAC,CACvD,CACF,CAAE,MAAO2C,KAAK,CAAE,CACdpD,KAAK,CAACoD,KAAK,CAAC,wBAAwB,CAAC,CACrC8C,OAAO,CAAC9C,KAAK,CAAC,aAAa,CAAEA,KAAK,CAAC,CACrC,CACF,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMoE,YAAY,CAACT,SAAS,CAAC,CACtC,CAAC,CAAE,CAAClG,WAAW,CAACE,IAAI,CAAE8B,WAAW,CAAEpC,EAAE,CAAC,CAAC,CAEvC;AACAf,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+H,kBAAkB,CAAIC,CAAoB,EAAK,CACnD,GAAI,CAAC7G,WAAW,CAACE,IAAI,GAAK8B,WAAW,CAACH,MAAM,CAAG,CAAC,EAAIT,YAAY,CAACS,MAAM,CAAG,CAAC,CAAC,CAAE,CAC5EgF,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBD,CAAC,CAACE,WAAW,CAAG,EAAE,CACpB,CACF,CAAC,CAEDC,MAAM,CAACC,gBAAgB,CAAC,cAAc,CAAEL,kBAAkB,CAAC,CAE3D,MAAO,IAAM,CACXI,MAAM,CAACE,mBAAmB,CAAC,cAAc,CAAEN,kBAAkB,CAAC,CAChE,CAAC,CACH,CAAC,CAAE,CAAC5G,WAAW,CAACE,IAAI,CAAE8B,WAAW,CAACH,MAAM,CAAET,YAAY,CAACS,MAAM,CAAC,CAAC,CAE/D,KAAM,CAAAsF,iBAAiB,CAAIC,UAAsB,EAAK,CACpDjF,iBAAiB,CAACiF,UAAU,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAIC,cAA0B,EAAK,CACxDrF,cAAc,CAACY,IAAI,EAAIA,IAAI,CAACc,GAAG,CAAC2C,GAAG,EACjCA,GAAG,CAAC1G,EAAE,GAAK0H,cAAc,CAAC1H,EAAE,CAAG0H,cAAc,CAAGhB,GAClD,CAAC,CAAC,CACFnE,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,KAAM,CAAAoF,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI,CAACvH,WAAW,CAACE,IAAI,GAAK8B,WAAW,CAACH,MAAM,CAAG,CAAC,EAAIT,YAAY,CAACS,MAAM,CAAG,CAAC,CAAC,CAAE,CAC5E,GAAImF,MAAM,CAACQ,OAAO,CAAC,mFAAmF,CAAC,CAAE,CACvG3H,QAAQ,CAAC,eAAe,CAAC,CAC3B,CACF,CAAC,IAAM,CACLA,QAAQ,CAAC,eAAe,CAAC,CAC3B,CACF,CAAC,CAED,GAAIyB,SAAS,CAAE,CACb,mBACE9B,KAAA,QAAKiI,SAAS,CAAC,oDAAoD,CAAAC,QAAA,eACjEpI,IAAA,QAAKmI,SAAS,CAAC,qEAAqE,CAAM,CAAC,cAC3FnI,IAAA,MAAGmI,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,yBAAuB,CAAG,CAAC,EACxE,CAAC,CAEV,CAEA,mBACElI,KAAA,QAAKiI,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpClI,KAAA,QAAKiI,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDpI,IAAA,QAAKmI,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BpI,IAAA,UACEqI,IAAI,CAAC,MAAM,CACXjF,KAAK,CAAE1C,WAAW,CAACE,IAAK,CACxB0H,QAAQ,CAAGf,CAAC,EAAK5G,cAAc,CAAC4C,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE3C,IAAI,CAAE2G,CAAC,CAACgB,MAAM,CAACnF,KAAK,EAAG,CAAE,CAC7EoF,WAAW,CAAC,yBAAyB,CACrCL,SAAS,CAAC,2JAA2J,CACtK,CAAC,CACC,CAAC,cACNjI,KAAA,QAAKiI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpI,IAAA,SAAMmI,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACvD1H,WAAW,CAACO,MAAM,CAACwH,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGhI,WAAW,CAACO,MAAM,CAAC0H,KAAK,CAAC,CAAC,CAAC,CACrE,CAAC,cACP3I,IAAA,WACE4I,OAAO,CAAEX,gBAAiB,CAC1BE,SAAS,CAAC,+DAA+D,CAAAC,QAAA,CAC1E,cAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAENlI,KAAA,QAAKiI,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBpI,IAAA,QAAKmI,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrBpI,IAAA,QAAKmI,SAAS,CAAC,iDAAiD,CAAAC,QAAA,cAC9DlI,KAAA,QAAKiI,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBlI,KAAA,QAAKiI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpI,IAAA,SAAMmI,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAC,eAAa,CAAM,CAAC,cAC3FlI,KAAA,QAAKiI,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/DpI,IAAA,WACE4I,OAAO,CAAEA,CAAA,GAAMrH,cAAc,CAAC,QAAQ,CAAE,CACxC4G,SAAS,4FAAA5C,MAAA,CAELjE,WAAW,GAAK,QAAQ,CACtB,mEAAmE,CACnE,+EAA+E,0BAEnF,CAAA8G,QAAA,CACH,QAED,CAAQ,CAAC,cACTpI,IAAA,WACE4I,OAAO,CAAEA,CAAA,GAAMrH,cAAc,CAAC,QAAQ,CAAE,CACxC4G,SAAS,4FAAA5C,MAAA,CAELjE,WAAW,GAAK,QAAQ,CACtB,mEAAmE,CACnE,+EAA+E,0BAEnF,CAAA8G,QAAA,CACH,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAGNlI,KAAA,QAAKiI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpI,IAAA,SAAMmI,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAC,aAAW,CAAM,CAAC,cACzFlI,KAAA,QAAKiI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbQ,GAAG,CAAC,GAAG,CACPzF,KAAK,CAAE5B,YAAY,CAACE,KAAM,CAC1B4G,QAAQ,CAAGf,CAAC,EAAKrE,iBAAiB,CAAC,OAAO,CAAEqE,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAC5D+E,SAAS,CAAC,qGAAqG,CAC/GxB,QAAQ,CAAErF,WAAW,GAAK,QAAS,CACpC,CAAC,CACDA,WAAW,GAAK,QAAQ,eACvBpB,KAAA,CAAAE,SAAA,EAAAgI,QAAA,eACEpI,IAAA,SAAMmI,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,IAAE,CAAM,CAAC,cAC5DpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbQ,GAAG,CAAErH,YAAY,CAACE,KAAM,CACxB0B,KAAK,CAAE5B,YAAY,CAACG,GAAI,CACxB2G,QAAQ,CAAGf,CAAC,EAAKrE,iBAAiB,CAAC,KAAK,CAAEqE,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAC1D+E,SAAS,CAAC,qGAAqG,CAChH,CAAC,EACF,CACH,EACE,CAAC,EACH,CAAC,cAGNjI,KAAA,QAAKiI,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBtG,YAAY,CAACuC,GAAG,CAAC,CAACC,IAAI,CAAEF,KAAK,gBAC5BlE,KAAA,QAAiBiI,SAAS,CAAC,wEAAwE,CAAAC,QAAA,eACjGlI,KAAA,QAAKiI,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBpI,IAAA,MAAGmI,SAAS,CAAC,2CAA2C,CAAAC,QAAA,CAAE9D,IAAI,CAACZ,OAAO,CAAC9C,IAAI,CAAI,CAAC,cAChFV,KAAA,MAAGiI,SAAS,CAAC,0CAA0C,CAAAC,QAAA,EAAC,UAC9C,CAAC9D,IAAI,CAACnD,gBAAgB,CAAC,cAAY,CAACmD,IAAI,CAAClD,cAAc,CAAC,SAClE,EAAG,CAAC,EACD,CAAC,cACNlB,KAAA,QAAKiI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbQ,GAAG,CAAC,GAAG,CACPzF,KAAK,CAAEkB,IAAI,CAACX,QAAS,CACrB2E,QAAQ,CAAGf,CAAC,EAAKpD,oBAAoB,CAACC,KAAK,CAAEmD,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAC7D+E,SAAS,CAAC,qGAAqG,CAChH,CAAC,cACFnI,IAAA,WACE4I,OAAO,CAAEA,CAAA,GAAMpE,mBAAmB,CAACJ,KAAK,CAAE,CAC1C+D,SAAS,CAAC,2EAA2E,CAAAC,QAAA,cAErFpI,IAAA,QAAKmI,SAAS,CAAC,SAAS,CAACW,IAAI,CAAC,MAAM,CAACC,OAAO,CAAC,WAAW,CAACC,MAAM,CAAC,cAAc,CAAAZ,QAAA,cAC5EpI,IAAA,SAAMiJ,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,sBAAsB,CAAE,CAAC,CAC3F,CAAC,CACA,CAAC,EACN,CAAC,GAvBEhF,KAwBL,CACN,CAAC,cAGFlE,KAAA,QAAKiI,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBpI,IAAA,WACEqI,IAAI,CAAC,QAAQ,CACbF,SAAS,CAAC,qLAAqL,CAC/LS,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAAS,IAAI,CAAG5C,QAAQ,CAAC6C,cAAc,CAAC,aAAa,CAAC,CACnD,GAAID,IAAI,CAAEA,IAAI,CAACE,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC,CAC3C,CAAE,CAAApB,QAAA,CACH,eAED,CAAQ,CAAC,cAGTpI,IAAA,QACEM,EAAE,CAAC,aAAa,CAChB6H,SAAS,CAAC,6GAA6G,CAAAC,QAAA,CAEtHxG,QAAQ,CACN6C,MAAM,CAACf,OAAO,EAAI,CAAC5B,YAAY,CAAC2H,IAAI,CAACnF,IAAI,EAAIA,IAAI,CAACZ,OAAO,CAACpD,EAAE,GAAKoD,OAAO,CAACpD,EAAE,CAAC,CAAC,CAC7E+D,GAAG,CAACX,OAAO,eACVxD,KAAA,WAEEiI,SAAS,CAAC,8GAA8G,CACxHS,OAAO,CAAEA,CAAA,GAAM,CACb3E,gBAAgB,CAACP,OAAO,CAAC,CACzB,KAAM,CAAA2F,IAAI,CAAG5C,QAAQ,CAAC6C,cAAc,CAAC,aAAa,CAAC,CACnD,GAAID,IAAI,CAAEA,IAAI,CAACE,SAAS,CAACG,GAAG,CAAC,QAAQ,CAAC,CACxC,CAAE,CAAAtB,QAAA,eAEFpI,IAAA,QAAKmI,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE1E,OAAO,CAAC9C,IAAI,CAAM,CAAC,cACjDV,KAAA,QAAKiI,SAAS,CAAC,0CAA0C,CAAAC,QAAA,EAAC,WAC/C,CAAC1E,OAAO,CAACiC,MAAM,CAAC,cAAY,CAACjC,OAAO,CAACQ,WAAW,EACtD,CAAC,GAXDR,OAAO,CAACpD,EAYP,CACT,CAAC,CACD,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,cAGNJ,KAAA,QAAKiI,SAAS,CAAC,yEAAyE,CAAAC,QAAA,eACtFpI,IAAA,OAAImI,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAE1FlI,KAAA,QAAKiI,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBlI,KAAA,QAAAkI,QAAA,eACEpI,IAAA,UAAOmI,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,yBAEnF,CAAO,CAAC,cACRpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbsB,IAAI,CAAC,KAAK,CACVvG,KAAK,CAAElB,MAAM,CAACE,WAAY,CAC1BkG,QAAQ,CAAGf,CAAC,EAAKtC,iBAAiB,CAAC,aAAa,CAAEsC,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAClE+E,SAAS,CAAC,uGAAuG,CAClH,CAAC,EACC,CAAC,cAENjI,KAAA,QAAAkI,QAAA,eACEpI,IAAA,UAAOmI,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,uBAEnF,CAAO,CAAC,cACRpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbsB,IAAI,CAAC,KAAK,CACVvG,KAAK,CAAElB,MAAM,CAACG,SAAU,CACxBiG,QAAQ,CAAGf,CAAC,EAAKtC,iBAAiB,CAAC,WAAW,CAAEsC,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAChE+E,SAAS,CAAC,uGAAuG,CAClH,CAAC,EACC,CAAC,cAGNjI,KAAA,QAAAkI,QAAA,eACEpI,IAAA,UAAOmI,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,iBAEnF,CAAO,CAAC,cACRlI,KAAA,QAAKiI,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCpI,IAAA,QAAAoI,QAAA,cACEpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbsB,IAAI,CAAC,KAAK,CACVvG,KAAK,CAAElB,MAAM,CAACI,UAAU,CAACC,MAAO,CAChC+F,QAAQ,CAAGf,CAAC,EAAKtC,iBAAiB,CAAC,QAAQ,CAAEsC,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAC7DoF,WAAW,CAAC,QAAQ,CACpBL,SAAS,CAAC,uGAAuG,CAClH,CAAC,CACC,CAAC,cACNnI,IAAA,QAAAoI,QAAA,cACEpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbsB,IAAI,CAAC,KAAK,CACVvG,KAAK,CAAElB,MAAM,CAACI,UAAU,CAACE,KAAM,CAC/B8F,QAAQ,CAAGf,CAAC,EAAKtC,iBAAiB,CAAC,OAAO,CAAEsC,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAC5DoF,WAAW,CAAC,OAAO,CACnBL,SAAS,CAAC,uGAAuG,CAClH,CAAC,CACC,CAAC,cACNnI,IAAA,QAAAoI,QAAA,cACEpI,IAAA,UACEqI,IAAI,CAAC,QAAQ,CACbsB,IAAI,CAAC,KAAK,CACVvG,KAAK,CAAElB,MAAM,CAACI,UAAU,CAACG,MAAO,CAChC6F,QAAQ,CAAGf,CAAC,EAAKtC,iBAAiB,CAAC,QAAQ,CAAEsC,CAAC,CAACgB,MAAM,CAACnF,KAAK,CAAE,CAC7DoF,WAAW,CAAC,QAAQ,CACpBL,SAAS,CAAC,uGAAuG,CAClH,CAAC,CACC,CAAC,EACH,CAAC,EACH,CAAC,cAGNnI,IAAA,WACEqI,IAAI,CAAC,QAAQ,CACbF,SAAS,CAAC,2EAA2E,CACrFS,OAAO,CAAExD,gBAAiB,CAAAgD,QAAA,CAC3B,aAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CAGL1F,WAAW,CAACH,MAAM,CAAG,CAAC,eACrBvC,IAAA,QAAKmI,SAAS,CAAC,kEAAkE,CAAAC,QAAA,cAC/ElI,KAAA,UAAOiI,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eACzEpI,IAAA,UAAOmI,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC5ClI,KAAA,OAAAkI,QAAA,eACEpI,IAAA,OAAImI,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAAC,YAElH,CAAI,CAAC,cACLpI,IAAA,OAAImI,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAAC,wBAElH,CAAI,CAAC,cACLpI,IAAA,OAAImI,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAAC,KAElH,CAAI,CAAC,cACLpI,IAAA,OAAImI,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAAC,cAElH,CAAI,CAAC,cACLpI,IAAA,OAAImI,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAAC,YAElH,CAAI,CAAC,cACLpI,IAAA,OAAImI,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAAC,SAElH,CAAI,CAAC,cACLpI,IAAA,OAAImI,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAAC,YAElH,CAAI,CAAC,cACLpI,IAAA,OAAImI,SAAS,CAAC,oGAAoG,CAAAC,QAAA,CAAC,SAEnH,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACRpI,IAAA,UAAOmI,SAAS,CAAC,yEAAyE,CAAAC,QAAA,CACvF1F,WAAW,CAAC2B,GAAG,CAAE2C,GAAG,EACnBA,GAAG,CAAC9F,KAAK,CAACmD,GAAG,CAAC,CAACC,IAAI,CAAEsF,SAAS,gBAC5B1J,KAAA,OAAAkI,QAAA,EACGwB,SAAS,GAAK,CAAC,eACd5J,IAAA,OACE6J,OAAO,CAAE7C,GAAG,CAAC9F,KAAK,CAACqB,MAAO,CAC1B4F,SAAS,CAAC,6EAA6E,CAAAC,QAAA,CAEtFpB,GAAG,CAAC3B,SAAS,CACZ,CACL,cACDrF,IAAA,OAAImI,SAAS,CAAC,iDAAiD,CAAAC,QAAA,CAC5D9D,IAAI,CAACZ,OAAO,CAAC9C,IAAI,CAChB,CAAC,cACLZ,IAAA,OAAImI,SAAS,CAAC,mEAAmE,CAAAC,QAAA,CAC9E9D,IAAI,CAACX,QAAQ,CACZ,CAAC,CACJiG,SAAS,GAAK,CAAC,eACd1J,KAAA,CAAAE,SAAA,EAAAgI,QAAA,eACEpI,IAAA,OACE6J,OAAO,CAAE7C,GAAG,CAAC9F,KAAK,CAACqB,MAAO,CAC1B4F,SAAS,CAAC,6EAA6E,CAAAC,QAAA,CAEtFpB,GAAG,CAAC5E,WAAW,CACd,CAAC,cACLpC,IAAA,OACE6J,OAAO,CAAE7C,GAAG,CAAC9F,KAAK,CAACqB,MAAO,CAC1B4F,SAAS,CAAC,6EAA6E,CAAAC,QAAA,CAEtFpB,GAAG,CAAC3E,SAAS,CACZ,CAAC,EACL,CACH,cACDrC,IAAA,OAAImI,SAAS,CAAC,mEAAmE,CAAAC,QAAA,CAC9E9D,IAAI,CAACZ,OAAO,CAACiC,MAAM,CAClB,CAAC,CACJiE,SAAS,GAAK,CAAC,eACd1J,KAAA,CAAAE,SAAA,EAAAgI,QAAA,eACEpI,IAAA,OACE6J,OAAO,CAAE7C,GAAG,CAAC9F,KAAK,CAACqB,MAAO,CAC1B4F,SAAS,CAAC,6EAA6E,CAAAC,QAAA,IAAA7C,MAAA,CAEnFyB,GAAG,CAAC1E,UAAU,CAACC,MAAM,WAAAgD,MAAA,CAAMyB,GAAG,CAAC1E,UAAU,CAACE,KAAK,WAAA+C,MAAA,CAAMyB,GAAG,CAAC1E,UAAU,CAACG,MAAM,EAC5E,CAAC,cACLvC,KAAA,OACE2J,OAAO,CAAE7C,GAAG,CAAC9F,KAAK,CAACqB,MAAO,CAC1B4F,SAAS,CAAC,sEAAsE,CAAAC,QAAA,eAEhFpI,IAAA,WACE4I,OAAO,CAAEA,CAAA,GAAMf,iBAAiB,CAACb,GAAG,CAAE,CACtCmB,SAAS,CAAC,oFAAoF,CAAAC,QAAA,CAC/F,MAED,CAAQ,CAAC,cACTpI,IAAA,WACE4I,OAAO,CAAEA,CAAA,GAAM,CACb,GAAIlB,MAAM,CAACQ,OAAO,CAAC,+CAA+C,CAAC,CAAE,CACnEvF,cAAc,CAACY,IAAI,EAAIA,IAAI,CAACkB,MAAM,CAACqF,CAAC,EAAIA,CAAC,CAACxJ,EAAE,GAAK0G,GAAG,CAAC1G,EAAE,CAAC,CAAC,CAC3D,CACF,CAAE,CACF6H,SAAS,CAAC,2EAA2E,CAAAC,QAAA,CACtF,QAED,CAAQ,CAAC,EACP,CAAC,EACL,CACH,MAAA7C,MAAA,CAhESyB,GAAG,CAAC1G,EAAE,MAAAiF,MAAA,CAAIqE,SAAS,CAiE3B,CACL,CACF,CAAC,CACG,CAAC,EACH,CAAC,CACL,CACN,CAGAhH,cAAc,eACb5C,IAAA,CAACF,gBAAgB,EACfiK,MAAM,CAAEtJ,OAAO,CAACmC,cAAc,CAAE,CAChCoH,OAAO,CAAEA,CAAA,GAAMnH,iBAAiB,CAAC,IAAI,CAAE,CACvCoH,MAAM,CAAElC,iBAAkB,CAC1BmC,WAAW,CAAEtH,cAAe,CAC5BuH,WAAW,CAAEvI,QAAS,CACvB,CACF,EACE,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}