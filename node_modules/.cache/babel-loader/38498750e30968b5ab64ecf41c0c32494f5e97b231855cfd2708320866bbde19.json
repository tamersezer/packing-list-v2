{"ast":null,"code":"var _jsxFileName = \"/Users/tamersezer/Cursor Projects/Deneme/src/components/packing/PackingListForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { productService, packingListService } from '../../services/api';\nimport { toast } from 'react-toastify';\nimport { EditPackageModal } from './EditPackageModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const PackingListForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const isEditing = Boolean(id);\n  const [packingList, setPackingList] = useState({\n    name: '',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    status: 'draft',\n    items: [],\n    totalGrossWeight: 0,\n    totalNetWeight: 0,\n    totalNumberOfBoxes: 0\n  });\n  const [packageType, setPackageType] = useState('pallet');\n  const [packageRange, setPackageRange] = useState({\n    start: 1,\n    end: 1\n  });\n  const [products, setProducts] = useState([]);\n  const [packageItems, setPackageItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [totals, setTotals] = useState({\n    grossWeight: 0,\n    netWeight: 0,\n    dimensions: {\n      length: packageType === 'pallet' ? 80 : 0,\n      width: packageType === 'pallet' ? 120 : 0,\n      height: 0\n    }\n  });\n  const [packageRows, setPackageRows] = useState([]);\n  const [editingPackage, setEditingPackage] = useState(null);\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const data = await productService.getAll();\n        setProducts(data);\n      } catch (error) {\n        toast.error('Failed to load products');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchProducts();\n  }, []);\n  const handleRangeChange = (field, value) => {\n    const numValue = parseInt(value) || 1;\n    setPackageRange(prev => ({\n      ...prev,\n      [field]: numValue\n    }));\n  };\n  const calculateWeights = (product, quantity) => {\n    return {\n      gross: Number((product.weights.gross * quantity).toFixed(1)),\n      net: Number((product.weights.net * quantity).toFixed(1))\n    };\n  };\n  const handleAddProduct = product => {\n    const {\n      gross,\n      net\n    } = calculateWeights(product, product.boxQuantity);\n    setPackageItems(prev => [...prev, {\n      product,\n      quantity: product.boxQuantity,\n      totalGrossWeight: gross,\n      totalNetWeight: net\n    }]);\n  };\n  const handleQuantityChange = (index, value) => {\n    const numValue = parseInt(value) || 1;\n    setPackageItems(prev => prev.map((item, i) => {\n      if (i === index) {\n        const {\n          gross,\n          net\n        } = calculateWeights(item.product, numValue);\n        return {\n          ...item,\n          quantity: numValue,\n          totalGrossWeight: gross,\n          totalNetWeight: net\n        };\n      }\n      return item;\n    }));\n  };\n  const handleRemoveProduct = index => {\n    setPackageItems(prev => prev.filter((_, i) => i !== index));\n  };\n  const calculateTotals = items => {\n    const itemTotals = items.reduce((acc, item) => ({\n      gross: acc.gross + item.totalGrossWeight,\n      net: acc.net + item.totalNetWeight\n    }), {\n      gross: 0,\n      net: 0\n    });\n    const grossWeight = packageType === 'pallet' ? itemTotals.gross + 24 : itemTotals.gross;\n    return {\n      grossWeight: Number(grossWeight.toFixed(1)),\n      netWeight: Number(itemTotals.net.toFixed(1))\n    };\n  };\n  useEffect(() => {\n    const {\n      grossWeight,\n      netWeight\n    } = calculateTotals(packageItems);\n    setTotals(prev => ({\n      ...prev,\n      grossWeight,\n      netWeight\n    }));\n  }, [packageItems, packageType]);\n  useEffect(() => {\n    if (packageType === 'pallet') {\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          length: 80,\n          width: 120,\n          height: 0\n        }\n      }));\n    } else if (packageItems.length > 0) {\n      const firstProduct = packageItems[0].product;\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          length: firstProduct.boxDimensions.length,\n          width: firstProduct.boxDimensions.width,\n          height: firstProduct.boxDimensions.height\n        }\n      }));\n    }\n  }, [packageType, packageItems]);\n  const handleTotalChange = (field, value) => {\n    const numValue = parseFloat(value) || 0;\n    if (field === 'grossWeight' || field === 'netWeight') {\n      setTotals(prev => ({\n        ...prev,\n        [field]: Number(numValue.toFixed(1))\n      }));\n    } else {\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          ...prev.dimensions,\n          [field]: Number(numValue.toFixed(1))\n        }\n      }));\n    }\n  };\n  const validatePackage = useCallback(() => {\n    if (packageItems.length === 0) {\n      toast.error('Please add at least one product');\n      return false;\n    }\n    const {\n      grossWeight,\n      netWeight\n    } = totals;\n    if (grossWeight < netWeight) {\n      toast.error('Gross weight cannot be less than net weight');\n      return false;\n    }\n    if (totals.dimensions.height <= 0 || totals.dimensions.width <= 0 || totals.dimensions.length <= 0) {\n      toast.error('All dimensions must be greater than 0');\n      return false;\n    }\n    return true;\n  }, [packageItems, totals]);\n  const handleAddPackage = async () => {\n    if (!validatePackage()) return;\n    try {\n      const packageNo = packageType === 'pallet' ? packageRange.start.toString() : `${packageRange.start} to ${packageRange.end}`;\n\n      // Yeni paket satırı oluştur\n      const newPackageRow = {\n        id: crypto.randomUUID(),\n        packageNo,\n        items: packageItems.map(item => ({\n          product: item.product,\n          quantity: item.quantity\n        })),\n        grossWeight: totals.grossWeight,\n        netWeight: totals.netWeight,\n        dimensions: totals.dimensions,\n        // Eğer tüm ürünlerin HS kodu aynıysa, onu kullan\n        hsCode: packageItems.every(item => item.product.hsCode === packageItems[0].product.hsCode) ? packageItems[0].product.hsCode : undefined\n      };\n      setPackageRows(prev => [...prev, newPackageRow]);\n\n      // Formu sıfırla\n      setPackageItems([]);\n      setTotals({\n        grossWeight: 0,\n        netWeight: 0,\n        dimensions: {\n          length: packageType === 'pallet' ? 80 : 0,\n          width: packageType === 'pallet' ? 120 : 0,\n          height: 0\n        }\n      });\n\n      // Palet ise sonraki numaraya geç\n      if (packageType === 'pallet') {\n        setPackageRange(prev => ({\n          start: prev.start + 1,\n          end: prev.start + 1\n        }));\n      } else {\n        // Koli ise sonraki aralığa geç\n        setPackageRange(prev => ({\n          start: prev.end + 1,\n          end: prev.end + 1\n        }));\n      }\n      toast.success('Package added successfully');\n    } catch (error) {\n      toast.error('Failed to add package');\n      console.error('Add package error:', error);\n    }\n  };\n\n  // Son paket numarasını bulup bir sonrakini ayarla\n  const setNextPackageNumber = rows => {\n    if (rows.length === 0) {\n      setPackageRange({\n        start: 1,\n        end: 1\n      });\n      return;\n    }\n\n    // Son paketin numarasını al\n    const lastPackageNo = rows[rows.length - 1].packageNo;\n\n    // \"1 to 3\" formatındaysa son sayıyı, değilse tek sayıyı al\n    const match = lastPackageNo.match(/(\\d+)(?:\\s*to\\s*(\\d+))?/);\n    if (!match) return;\n    const lastNumber = match[2] || match[1];\n    const nextNumber = parseInt(lastNumber) + 1;\n    setPackageRange({\n      start: nextNumber,\n      end: nextNumber\n    });\n  };\n\n  // Mevcut paket listesini yükle\n  useEffect(() => {\n    const loadPackingList = async () => {\n      if (id) {\n        try {\n          const data = await packingListService.getById(id);\n          setPackingList(data);\n          setPackageRows(data.items);\n          setNextPackageNumber(data.items); // Yeni eklendi\n        } catch (error) {\n          toast.error('Failed to load packing list');\n          navigate('/packing-list');\n        }\n      }\n    };\n    loadPackingList();\n  }, [id, navigate]);\n\n  // Package Type değiştiğinde input'u enable/disable yap\n  useEffect(() => {\n    const input = document.querySelector('input[type=\"number\"][min=\"1\"]');\n    if (input) {\n      input.disabled = packageType === 'pallet';\n    }\n  }, [packageType]);\n\n  // Değişiklikleri otomatik kaydet\n  useEffect(() => {\n    if (!packingList.name) return;\n    const timeoutId = setTimeout(async () => {\n      try {\n        const updatedPackingList = {\n          ...packingList,\n          items: packageRows,\n          updatedAt: new Date().toISOString(),\n          totalGrossWeight: packageRows.reduce((sum, row) => sum + row.grossWeight, 0),\n          totalNetWeight: packageRows.reduce((sum, row) => sum + row.netWeight, 0),\n          totalNumberOfBoxes: packageRows.reduce((sum, row) => sum + row.items.reduce((itemSum, item) => itemSum + item.quantity, 0), 0)\n        };\n        if (id) {\n          await packingListService.update(id, updatedPackingList);\n        } else if (packingList.id) {\n          await packingListService.update(packingList.id, updatedPackingList);\n        } else {\n          const newList = await packingListService.create(updatedPackingList);\n          setPackingList(prev => ({\n            ...prev,\n            id: newList.id\n          }));\n        }\n      } catch (error) {\n        toast.error('Failed to save changes');\n        console.error('Save error:', error);\n      }\n    }, 1000);\n    return () => clearTimeout(timeoutId);\n  }, [packingList.name, packageRows, id]);\n\n  // Sayfadan çıkmadan önce kontrol\n  useEffect(() => {\n    const handleBeforeUnload = e => {\n      if (!packingList.name && (packageRows.length > 0 || packageItems.length > 0)) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [packingList.name, packageRows.length, packageItems.length]);\n  const handleEditPackage = packageRow => {\n    setEditingPackage(packageRow);\n  };\n  const handleSavePackage = updatedPackage => {\n    setPackageRows(prev => prev.map(row => row.id === updatedPackage.id ? updatedPackage : row));\n    setEditingPackage(null);\n  };\n  const handleBackToList = () => {\n    if (!packingList.name && (packageRows.length > 0 || packageItems.length > 0)) {\n      if (window.confirm('The packing list will not be saved without a name. Are you sure you want to exit?')) {\n        navigate('/packing-list');\n      }\n    } else {\n      navigate('/packing-list');\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center justify-center h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 dark:text-gray-400\",\n        children: \"Loading packing list...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 max-w-md\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: packingList.name,\n          onChange: e => setPackingList(prev => ({\n            ...prev,\n            name: e.target.value\n          })),\n          placeholder: \"Enter Packing List Name\",\n          className: \"w-full px-4 py-2 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-500 dark:text-gray-400\",\n          children: packingList.status.charAt(0).toUpperCase() + packingList.status.slice(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleBackToList,\n          className: \"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700\",\n          children: \"Back to List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white dark:bg-gray-800 shadow rounded-lg p-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-gray-700 dark:text-gray-300\",\n                children: \"Package Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex bg-gray-200 dark:bg-gray-700 rounded-lg p-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setPackageType('pallet'),\n                  className: `\n                      px-4 py-2 text-sm font-medium rounded-md\n                      ${packageType === 'pallet' ? 'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'}\n                    `,\n                  children: \"Pallet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setPackageType('carton'),\n                  className: `\n                      px-4 py-2 text-sm font-medium rounded-md\n                      ${packageType === 'carton' ? 'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'}\n                    `,\n                  children: \"Carton\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-gray-700 dark:text-gray-300\",\n                children: \"Package No:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  value: packageRange.start,\n                  onChange: e => handleRangeChange('start', e.target.value),\n                  className: \"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\",\n                  disabled: packageType === 'pallet'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 19\n                }, this), packageType === 'carton' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-500 dark:text-gray-400\",\n                    children: \"to\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 501,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: packageRange.start,\n                    value: packageRange.end,\n                    onChange: e => handleRangeChange('end', e.target.value),\n                    className: \"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 502,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [packageItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4 bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium text-gray-900 dark:text-white\",\n                    children: item.product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 519,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500 dark:text-gray-400\",\n                    children: [\"Weight: \", item.totalGrossWeight, \" kg gross / \", item.totalNetWeight, \" kg net\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 520,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"1\",\n                    value: item.quantity,\n                    onChange: e => handleQuantityChange(index, e.target.value),\n                    className: \"w-24 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleRemoveProduct(index),\n                    className: \"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\",\n                    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"h-5 w-5\",\n                      fill: \"none\",\n                      viewBox: \"0 0 24 24\",\n                      stroke: \"currentColor\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M6 18L18 6M6 6l12 12\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 537,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 536,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 532,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"w-full px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md focus:outline-none\",\n                  onClick: () => {\n                    const menu = document.getElementById('productMenu');\n                    if (menu) menu.classList.toggle('hidden');\n                  },\n                  children: \"+ Add Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"productMenu\",\n                  className: \"hidden absolute z-10 mt-2 w-full bg-white dark:bg-gray-800 shadow-lg rounded-md py-1 max-h-60 overflow-auto\",\n                  children: products.filter(product => !packageItems.some(item => item.product.id === product.id)).map(product => /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\",\n                    onClick: () => {\n                      handleAddProduct(product);\n                      const menu = document.getElementById('productMenu');\n                      if (menu) menu.classList.add('hidden');\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-medium\",\n                      children: product.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 574,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-500 dark:text-gray-400\",\n                      children: [\"HS Code: \", product.hsCode, \" | Box Qty: \", product.boxQuantity]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 575,\n                      columnNumber: 27\n                    }, this)]\n                  }, product.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 565,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-80 bg-white dark:bg-gray-800 shadow rounded-lg p-6 h-fit sticky top-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 dark:text-white mb-4\",\n          children: \"Package Totals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n              children: \"Total Gross Weight (kg)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: totals.grossWeight,\n              onChange: e => handleTotalChange('grossWeight', e.target.value),\n              className: \"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n              children: \"Total Net Weight (kg)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: totals.netWeight,\n              onChange: e => handleTotalChange('netWeight', e.target.value),\n              className: \"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",\n              children: \"Dimensions (cm)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-3 gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.1\",\n                  value: totals.dimensions.length,\n                  onChange: e => handleTotalChange('length', e.target.value),\n                  placeholder: \"Length\",\n                  className: \"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.1\",\n                  value: totals.dimensions.width,\n                  onChange: e => handleTotalChange('width', e.target.value),\n                  placeholder: \"Width\",\n                  className: \"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 636,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.1\",\n                  value: totals.dimensions.height,\n                  onChange: e => handleTotalChange('height', e.target.value),\n                  placeholder: \"Height\",\n                  className: \"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 620,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mt-4\",\n            onClick: handleAddPackage,\n            children: \"Add Package\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), packageRows.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 bg-white dark:bg-gray-800 shadow rounded-lg overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full divide-y divide-gray-200 dark:divide-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-gray-50 dark:bg-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"Package No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"Package In Explanation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"Qty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"Gross Weight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"Net Weight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"HS Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"Dimensions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          className: \"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\",\n          children: packageRows.map(row => row.items.map((item, itemIndex) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [itemIndex === 0 && /*#__PURE__*/_jsxDEV(\"td\", {\n              rowSpan: row.items.length,\n              className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",\n              children: row.packageNo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 text-sm text-gray-900 dark:text-white\",\n              children: item.product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n              children: item.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 717,\n              columnNumber: 21\n            }, this), itemIndex === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                rowSpan: row.items.length,\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",\n                children: row.grossWeight\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                rowSpan: row.items.length,\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",\n                children: row.netWeight\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n              children: item.product.hsCode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 21\n            }, this), itemIndex === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                rowSpan: row.items.length,\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\",\n                children: `${row.dimensions.length} × ${row.dimensions.width} × ${row.dimensions.height}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 741,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                rowSpan: row.items.length,\n                className: \"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleEditPackage(row),\n                  className: \"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 751,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    if (window.confirm('Are you sure you want to delete this package?')) {\n                      setPackageRows(prev => prev.filter(p => p.id !== row.id));\n                    }\n                  },\n                  className: \"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 747,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true)]\n          }, `${row.id}-${itemIndex}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 19\n          }, this)))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 9\n    }, this), editingPackage && /*#__PURE__*/_jsxDEV(EditPackageModal, {\n      isOpen: Boolean(editingPackage),\n      onClose: () => setEditingPackage(null),\n      onSave: handleSavePackage,\n      packageData: editingPackage,\n      allProducts: products\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 780,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 428,\n    columnNumber: 5\n  }, this);\n};\n_s(PackingListForm, \"Pe0al9SZn5Y545275vx2cfIwiXc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = PackingListForm;\nvar _c;\n$RefreshReg$(_c, \"PackingListForm\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","productService","packingListService","toast","EditPackageModal","jsxDEV","_jsxDEV","Fragment","_Fragment","PackingListForm","_s","id","navigate","isEditing","Boolean","packingList","setPackingList","name","createdAt","Date","toISOString","updatedAt","status","items","totalGrossWeight","totalNetWeight","totalNumberOfBoxes","packageType","setPackageType","packageRange","setPackageRange","start","end","products","setProducts","packageItems","setPackageItems","isLoading","setIsLoading","totals","setTotals","grossWeight","netWeight","dimensions","length","width","height","packageRows","setPackageRows","editingPackage","setEditingPackage","fetchProducts","data","getAll","error","handleRangeChange","field","value","numValue","parseInt","prev","calculateWeights","product","quantity","gross","Number","weights","toFixed","net","handleAddProduct","boxQuantity","handleQuantityChange","index","map","item","i","handleRemoveProduct","filter","_","calculateTotals","itemTotals","reduce","acc","firstProduct","boxDimensions","handleTotalChange","parseFloat","validatePackage","handleAddPackage","packageNo","toString","newPackageRow","crypto","randomUUID","hsCode","every","undefined","success","console","setNextPackageNumber","rows","lastPackageNo","match","lastNumber","nextNumber","loadPackingList","getById","input","document","querySelector","disabled","timeoutId","setTimeout","updatedPackingList","sum","row","itemSum","update","newList","create","clearTimeout","handleBeforeUnload","e","preventDefault","returnValue","window","addEventListener","removeEventListener","handleEditPackage","packageRow","handleSavePackage","updatedPackage","handleBackToList","confirm","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","target","placeholder","charAt","toUpperCase","slice","onClick","min","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","menu","getElementById","classList","toggle","some","add","step","itemIndex","rowSpan","p","isOpen","onClose","onSave","packageData","allProducts","_c","$RefreshReg$"],"sources":["/Users/tamersezer/Cursor Projects/Deneme/src/components/packing/PackingListForm.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { productService, packingListService } from '../../services/api';\nimport type { Product } from '../../types/Product';\nimport { toast } from 'react-toastify';\nimport type { PackingList } from '../../types/PackingList';\nimport { EditPackageModal } from './EditPackageModal';\n\ntype PackageType = 'pallet' | 'carton';\n\ninterface PackageRange {\n  start: number;\n  end: number;\n}\n\ninterface PackageItem {\n  product: Product;\n  quantity: number;\n  totalGrossWeight: number;\n  totalNetWeight: number;\n}\n\ninterface PackageTotals {\n  grossWeight: number;\n  netWeight: number;\n  dimensions: {\n    length: number;\n    width: number;\n    height: number;\n  };\n}\n\ninterface PackageRow {\n  id: string;\n  packageNo: string; // \"1\" veya \"1 to 3\" gibi\n  items: {\n    product: Product;\n    quantity: number;\n  }[];\n  grossWeight: number;\n  netWeight: number;\n  dimensions: {\n    length: number;\n    width: number;\n    height: number;\n  };\n  hsCode?: string; // Opsiyonel, eğer tüm ürünlerin HS kodu aynıysa kullanılacak\n}\n\nexport const PackingListForm: React.FC = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const isEditing = Boolean(id);\n\n  const [packingList, setPackingList] = useState<PackingList>({\n    name: '',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    status: 'draft',\n    items: [],\n    totalGrossWeight: 0,\n    totalNetWeight: 0,\n    totalNumberOfBoxes: 0\n  });\n\n  const [packageType, setPackageType] = useState<PackageType>('pallet');\n  const [packageRange, setPackageRange] = useState<PackageRange>({ start: 1, end: 1 });\n  const [products, setProducts] = useState<Product[]>([]);\n  const [packageItems, setPackageItems] = useState<PackageItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [totals, setTotals] = useState<PackageTotals>({\n    grossWeight: 0,\n    netWeight: 0,\n    dimensions: {\n      length: packageType === 'pallet' ? 80 : 0,\n      width: packageType === 'pallet' ? 120 : 0,\n      height: 0\n    }\n  });\n  const [packageRows, setPackageRows] = useState<PackageRow[]>([]);\n  const [editingPackage, setEditingPackage] = useState<PackageRow | null>(null);\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const data = await productService.getAll();\n        setProducts(data);\n      } catch (error) {\n        toast.error('Failed to load products');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, []);\n\n  const handleRangeChange = (field: keyof PackageRange, value: string) => {\n    const numValue = parseInt(value) || 1;\n    setPackageRange(prev => ({\n      ...prev,\n      [field]: numValue\n    }));\n  };\n\n  const calculateWeights = (product: Product, quantity: number): { gross: number; net: number } => {\n    return {\n      gross: Number((product.weights.gross * quantity).toFixed(1)),\n      net: Number((product.weights.net * quantity).toFixed(1))\n    };\n  };\n\n  const handleAddProduct = (product: Product) => {\n    const { gross, net } = calculateWeights(product, product.boxQuantity);\n    setPackageItems(prev => [...prev, {\n      product,\n      quantity: product.boxQuantity,\n      totalGrossWeight: gross,\n      totalNetWeight: net\n    }]);\n  };\n\n  const handleQuantityChange = (index: number, value: string) => {\n    const numValue = parseInt(value) || 1;\n    setPackageItems(prev => prev.map((item, i) => {\n      if (i === index) {\n        const { gross, net } = calculateWeights(item.product, numValue);\n        return {\n          ...item,\n          quantity: numValue,\n          totalGrossWeight: gross,\n          totalNetWeight: net\n        };\n      }\n      return item;\n    }));\n  };\n\n  const handleRemoveProduct = (index: number) => {\n    setPackageItems(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const calculateTotals = (items: PackageItem[]) => {\n    const itemTotals = items.reduce(\n      (acc, item) => ({\n        gross: acc.gross + item.totalGrossWeight,\n        net: acc.net + item.totalNetWeight\n      }),\n      { gross: 0, net: 0 }\n    );\n\n    const grossWeight = packageType === 'pallet' \n      ? itemTotals.gross + 24 \n      : itemTotals.gross;\n\n    return {\n      grossWeight: Number(grossWeight.toFixed(1)),\n      netWeight: Number(itemTotals.net.toFixed(1))\n    };\n  };\n\n  useEffect(() => {\n    const { grossWeight, netWeight } = calculateTotals(packageItems);\n    setTotals(prev => ({\n      ...prev,\n      grossWeight,\n      netWeight\n    }));\n  }, [packageItems, packageType]);\n\n  useEffect(() => {\n    if (packageType === 'pallet') {\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          length: 80,\n          width: 120,\n          height: 0\n        }\n      }));\n    } else if (packageItems.length > 0) {\n      const firstProduct = packageItems[0].product;\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          length: firstProduct.boxDimensions.length,\n          width: firstProduct.boxDimensions.width,\n          height: firstProduct.boxDimensions.height\n        }\n      }));\n    }\n  }, [packageType, packageItems]);\n\n  const handleTotalChange = (\n    field: keyof PackageTotals | keyof PackageTotals['dimensions'],\n    value: string\n  ) => {\n    const numValue = parseFloat(value) || 0;\n    if (field === 'grossWeight' || field === 'netWeight') {\n      setTotals(prev => ({\n        ...prev,\n        [field]: Number(numValue.toFixed(1))\n      }));\n    } else {\n      setTotals(prev => ({\n        ...prev,\n        dimensions: {\n          ...prev.dimensions,\n          [field]: Number(numValue.toFixed(1))\n        }\n      }));\n    }\n  };\n\n  const validatePackage = useCallback(() => {\n    if (packageItems.length === 0) {\n      toast.error('Please add at least one product');\n      return false;\n    }\n\n    const { grossWeight, netWeight } = totals;\n    if (grossWeight < netWeight) {\n      toast.error('Gross weight cannot be less than net weight');\n      return false;\n    }\n\n    if (totals.dimensions.height <= 0 || \n        totals.dimensions.width <= 0 || \n        totals.dimensions.length <= 0) {\n      toast.error('All dimensions must be greater than 0');\n      return false;\n    }\n\n    return true;\n  }, [packageItems, totals]);\n\n  const handleAddPackage = async () => {\n    if (!validatePackage()) return;\n\n    try {\n      const packageNo = packageType === 'pallet' \n        ? packageRange.start.toString()\n        : `${packageRange.start} to ${packageRange.end}`;\n\n      // Yeni paket satırı oluştur\n      const newPackageRow: PackageRow = {\n        id: crypto.randomUUID(),\n        packageNo,\n        items: packageItems.map(item => ({\n          product: item.product,\n          quantity: item.quantity\n        })),\n        grossWeight: totals.grossWeight,\n        netWeight: totals.netWeight,\n        dimensions: totals.dimensions,\n        // Eğer tüm ürünlerin HS kodu aynıysa, onu kullan\n        hsCode: packageItems.every(item => item.product.hsCode === packageItems[0].product.hsCode)\n          ? packageItems[0].product.hsCode\n          : undefined\n      };\n\n      setPackageRows(prev => [...prev, newPackageRow]);\n\n      // Formu sıfırla\n      setPackageItems([]);\n      setTotals({\n        grossWeight: 0,\n        netWeight: 0,\n        dimensions: {\n          length: packageType === 'pallet' ? 80 : 0,\n          width: packageType === 'pallet' ? 120 : 0,\n          height: 0\n        }\n      });\n\n      // Palet ise sonraki numaraya geç\n      if (packageType === 'pallet') {\n        setPackageRange(prev => ({\n          start: prev.start + 1,\n          end: prev.start + 1\n        }));\n      } else {\n        // Koli ise sonraki aralığa geç\n        setPackageRange(prev => ({\n          start: prev.end + 1,\n          end: prev.end + 1\n        }));\n      }\n\n      toast.success('Package added successfully');\n    } catch (error) {\n      toast.error('Failed to add package');\n      console.error('Add package error:', error);\n    }\n  };\n\n  // Son paket numarasını bulup bir sonrakini ayarla\n  const setNextPackageNumber = (rows: PackageRow[]) => {\n    if (rows.length === 0) {\n      setPackageRange({ start: 1, end: 1 });\n      return;\n    }\n\n    // Son paketin numarasını al\n    const lastPackageNo = rows[rows.length - 1].packageNo;\n    \n    // \"1 to 3\" formatındaysa son sayıyı, değilse tek sayıyı al\n    const match = lastPackageNo.match(/(\\d+)(?:\\s*to\\s*(\\d+))?/);\n    if (!match) return;\n\n    const lastNumber = match[2] || match[1];\n    const nextNumber = parseInt(lastNumber) + 1;\n\n    setPackageRange({\n      start: nextNumber,\n      end: nextNumber\n    });\n  };\n\n  // Mevcut paket listesini yükle\n  useEffect(() => {\n    const loadPackingList = async () => {\n      if (id) {\n        try {\n          const data = await packingListService.getById(id);\n          setPackingList(data);\n          setPackageRows(data.items);\n          setNextPackageNumber(data.items); // Yeni eklendi\n        } catch (error) {\n          toast.error('Failed to load packing list');\n          navigate('/packing-list');\n        }\n      }\n    };\n\n    loadPackingList();\n  }, [id, navigate]);\n\n  // Package Type değiştiğinde input'u enable/disable yap\n  useEffect(() => {\n    const input = document.querySelector('input[type=\"number\"][min=\"1\"]') as HTMLInputElement;\n    if (input) {\n      input.disabled = packageType === 'pallet';\n    }\n  }, [packageType]);\n\n  // Değişiklikleri otomatik kaydet\n  useEffect(() => {\n    if (!packingList.name) return;\n\n    const timeoutId = setTimeout(async () => {\n      try {\n        const updatedPackingList = {\n          ...packingList,\n          items: packageRows,\n          updatedAt: new Date().toISOString(),\n          totalGrossWeight: packageRows.reduce((sum, row) => sum + row.grossWeight, 0),\n          totalNetWeight: packageRows.reduce((sum, row) => sum + row.netWeight, 0),\n          totalNumberOfBoxes: packageRows.reduce((sum, row) => \n            sum + row.items.reduce((itemSum, item) => itemSum + item.quantity, 0), 0\n          )\n        };\n\n        if (id) {\n          await packingListService.update(id, updatedPackingList);\n        } else if (packingList.id) {\n          await packingListService.update(packingList.id, updatedPackingList);\n        } else {\n          const newList = await packingListService.create(updatedPackingList);\n          setPackingList(prev => ({ ...prev, id: newList.id }));\n        }\n      } catch (error) {\n        toast.error('Failed to save changes');\n        console.error('Save error:', error);\n      }\n    }, 1000);\n\n    return () => clearTimeout(timeoutId);\n  }, [packingList.name, packageRows, id]);\n\n  // Sayfadan çıkmadan önce kontrol\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (!packingList.name && (packageRows.length > 0 || packageItems.length > 0)) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [packingList.name, packageRows.length, packageItems.length]);\n\n  const handleEditPackage = (packageRow: PackageRow) => {\n    setEditingPackage(packageRow);\n  };\n\n  const handleSavePackage = (updatedPackage: PackageRow) => {\n    setPackageRows(prev => prev.map(row => \n      row.id === updatedPackage.id ? updatedPackage : row\n    ));\n    setEditingPackage(null);\n  };\n\n  const handleBackToList = () => {\n    if (!packingList.name && (packageRows.length > 0 || packageItems.length > 0)) {\n      if (window.confirm('The packing list will not be saved without a name. Are you sure you want to exit?')) {\n        navigate('/packing-list');\n      }\n    } else {\n      navigate('/packing-list');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4\"></div>\n        <p className=\"text-gray-600 dark:text-gray-400\">Loading packing list...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div className=\"flex-1 max-w-md\">\n          <input\n            type=\"text\"\n            value={packingList.name}\n            onChange={(e) => setPackingList(prev => ({ ...prev, name: e.target.value }))}\n            placeholder=\"Enter Packing List Name\"\n            className=\"w-full px-4 py-2 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n          />\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n            {packingList.status.charAt(0).toUpperCase() + packingList.status.slice(1)}\n          </span>\n          <button\n            onClick={handleBackToList}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700\"\n          >\n            Back to List\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex gap-6\">\n        <div className=\"flex-1\">\n          <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg p-6\">\n            <div className=\"space-y-6\">\n              {/* Package Type Switch */}\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Package Type:</span>\n                <div className=\"flex bg-gray-200 dark:bg-gray-700 rounded-lg p-1\">\n                  <button\n                    onClick={() => setPackageType('pallet')}\n                    className={`\n                      px-4 py-2 text-sm font-medium rounded-md\n                      ${packageType === 'pallet'\n                        ? 'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow'\n                        : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                      }\n                    `}\n                  >\n                    Pallet\n                  </button>\n                  <button\n                    onClick={() => setPackageType('carton')}\n                    className={`\n                      px-4 py-2 text-sm font-medium rounded-md\n                      ${packageType === 'carton'\n                        ? 'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow'\n                        : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                      }\n                    `}\n                  >\n                    Carton\n                  </button>\n                </div>\n              </div>\n\n              {/* Package Number Range */}\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Package No:</span>\n                <div className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    value={packageRange.start}\n                    onChange={(e) => handleRangeChange('start', e.target.value)}\n                    className=\"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                    disabled={packageType === 'pallet'}\n                  />\n                  {packageType === 'carton' && (\n                    <>\n                      <span className=\"text-gray-500 dark:text-gray-400\">to</span>\n                      <input\n                        type=\"number\"\n                        min={packageRange.start}\n                        value={packageRange.end}\n                        onChange={(e) => handleRangeChange('end', e.target.value)}\n                        className=\"w-20 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                      />\n                    </>\n                  )}\n                </div>\n              </div>\n\n              {/* Product List */}\n              <div className=\"space-y-4\">\n                {packageItems.map((item, index) => (\n                  <div key={index} className=\"flex items-center space-x-4 bg-gray-50 dark:bg-gray-700 p-4 rounded-lg\">\n                    <div className=\"flex-1\">\n                      <p className=\"font-medium text-gray-900 dark:text-white\">{item.product.name}</p>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                        Weight: {item.totalGrossWeight} kg gross / {item.totalNetWeight} kg net\n                      </p>\n                    </div>\n                    <div className=\"flex items-center space-x-4\">\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => handleQuantityChange(index, e.target.value)}\n                        className=\"w-24 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                      />\n                      <button\n                        onClick={() => handleRemoveProduct(index)}\n                        className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                      >\n                        <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                ))}\n\n                {/* Add Product Button */}\n                <div className=\"relative\">\n                  <button\n                    type=\"button\"\n                    className=\"w-full px-4 py-2 text-left text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md focus:outline-none\"\n                    onClick={() => {\n                      const menu = document.getElementById('productMenu');\n                      if (menu) menu.classList.toggle('hidden');\n                    }}\n                  >\n                    + Add Product\n                  </button>\n\n                  {/* Product Dropdown Menu */}\n                  <div\n                    id=\"productMenu\"\n                    className=\"hidden absolute z-10 mt-2 w-full bg-white dark:bg-gray-800 shadow-lg rounded-md py-1 max-h-60 overflow-auto\"\n                  >\n                    {products\n                      .filter(product => !packageItems.some(item => item.product.id === product.id))\n                      .map(product => (\n                        <button\n                          key={product.id}\n                          className=\"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\"\n                          onClick={() => {\n                            handleAddProduct(product);\n                            const menu = document.getElementById('productMenu');\n                            if (menu) menu.classList.add('hidden');\n                          }}\n                        >\n                          <div className=\"font-medium\">{product.name}</div>\n                          <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                            HS Code: {product.hsCode} | Box Qty: {product.boxQuantity}\n                          </div>\n                        </button>\n                      ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Sağ taraf - Totals */}\n        <div className=\"w-80 bg-white dark:bg-gray-800 shadow rounded-lg p-6 h-fit sticky top-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Package Totals</h3>\n          \n          <div className=\"space-y-4\">\n            {/* Weights */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Total Gross Weight (kg)\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                value={totals.grossWeight}\n                onChange={(e) => handleTotalChange('grossWeight', e.target.value)}\n                className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Total Net Weight (kg)\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                value={totals.netWeight}\n                onChange={(e) => handleTotalChange('netWeight', e.target.value)}\n                className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n              />\n            </div>\n\n            {/* Dimensions */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Dimensions (cm)\n              </label>\n              <div className=\"grid grid-cols-3 gap-2\">\n                <div>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={totals.dimensions.length}\n                    onChange={(e) => handleTotalChange('length', e.target.value)}\n                    placeholder=\"Length\"\n                    className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={totals.dimensions.width}\n                    onChange={(e) => handleTotalChange('width', e.target.value)}\n                    placeholder=\"Width\"\n                    className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={totals.dimensions.height}\n                    onChange={(e) => handleTotalChange('height', e.target.value)}\n                    placeholder=\"Height\"\n                    className=\"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Add Package Button */}\n            <button\n              type=\"button\"\n              className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mt-4\"\n              onClick={handleAddPackage}\n            >\n              Add Package\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Package List Table */}\n      {packageRows.length > 0 && (\n        <div className=\"mt-8 bg-white dark:bg-gray-800 shadow rounded-lg overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Package No\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Package In Explanation\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Qty\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Gross Weight\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Net Weight\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  HS Code\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Dimensions\n                </th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {packageRows.map((row) => (\n                row.items.map((item, itemIndex) => (\n                  <tr key={`${row.id}-${itemIndex}`}>\n                    {itemIndex === 0 && (\n                      <td \n                        rowSpan={row.items.length} \n                        className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                      >\n                        {row.packageNo}\n                      </td>\n                    )}\n                    <td className=\"px-6 py-4 text-sm text-gray-900 dark:text-white\">\n                      {item.product.name}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      {item.quantity}\n                    </td>\n                    {itemIndex === 0 && (\n                      <>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                        >\n                          {row.grossWeight}\n                        </td>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                        >\n                          {row.netWeight}\n                        </td>\n                      </>\n                    )}\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      {item.product.hsCode}\n                    </td>\n                    {itemIndex === 0 && (\n                      <>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white align-top\"\n                        >\n                          {`${row.dimensions.length} × ${row.dimensions.width} × ${row.dimensions.height}`}\n                        </td>\n                        <td \n                          rowSpan={row.items.length} \n                          className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top\"\n                        >\n                          <button\n                            onClick={() => handleEditPackage(row)}\n                            className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3\"\n                          >\n                            Edit\n                          </button>\n                          <button\n                            onClick={() => {\n                              if (window.confirm('Are you sure you want to delete this package?')) {\n                                setPackageRows(prev => prev.filter(p => p.id !== row.id));\n                              }\n                            }}\n                            className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                          >\n                            Delete\n                          </button>\n                        </td>\n                      </>\n                    )}\n                  </tr>\n                ))\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {/* Modal */}\n      {editingPackage && (\n        <EditPackageModal\n          isOpen={Boolean(editingPackage)}\n          onClose={() => setEditingPackage(null)}\n          onSave={handleSavePackage}\n          packageData={editingPackage}\n          allProducts={products}\n        />\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}